<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>About me</title>
      <link href="/2023/03/22/About%20me/"/>
      <url>/2023/03/22/About%20me/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Post-1995 generation</p><p>ğŸTaurus</p><p>ğŸŒ‡Love sunset</p><p>ğŸŒ„Want to see the sunrise</p><p>ğŸ‘©â€ğŸ“Major in finance</p><p>ğŸ“šA learner of machine learning</p><p>ğŸ‡A lucky girl</p><p>â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤â¤</p><p>â€œä½ è¦çŸ¥é“ä»€ä¹ˆæ˜¯ä½ æƒ³è¦çš„ï¼Œ</p><p>çŸ¥é“ä»€ä¹ˆæ˜¯ä¸å¯é€†çš„ï¼Œ</p><p>çŸ¥é“ç”¨ä»€ä¹ˆæ–¹å¼å®ç°æ¢¦æƒ³ï¼Œ</p><p>çŸ¥é“ç”¨ä»€ä¹ˆå¿ƒæƒ…é¢å¯¹è‹¦éš¾ï¼Œ</p><p>äººå°±åœ¨ç¬é—´æ„Ÿæ‚Ÿï¼Œ</p><p>è¿›é€€å¾—å¤±ä¸ç¦»ä¸å¼ƒä¹Ÿå°±æœ‰äº†ç­”æ¡ˆã€‚</p><p>æˆ‘ä¸çŸ¥é“å‘½è¿å°†æŠŠæˆ‘å¸¦åˆ°ä½•æ–¹ï¼Œ</p><p>ä½†æˆ‘ä¸€ç›´ä¼šç”¨å–„è‰¯ç»´æŠ¤å·¦å³ã€‚â€</p>]]></content>
      
      
      <categories>
          
          <category> Eat Pray Love </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thinking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘å¯çœŸæ˜¯ä¸ªlucky girlå“‡</title>
      <link href="/2023/03/21/lucky%20girl/"/>
      <url>/2023/03/21/lucky%20girl/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ‰äº²äººçˆ±æˆ‘</p><p>æœ‰æœ‹å‹é™ªæˆ‘</p><p>å­¦ä¹ ä¸Šä¸ä¸Šä¸ä¸‹ä½†ä¹Ÿé¡ºé¡ºåˆ©åˆ©</p><p>å·¥ä½œä¸Šè‡ªæˆ‘æ€€ç–‘ä½†ä¹Ÿå°½åŠ›è€Œä¸º</p><p>é‡åˆ°çš„åŒå­¦éƒ½æ˜¯å¾ˆå¯çˆ±</p><p>é‡åˆ°çš„è€å¸ˆéƒ½å€¼å¾—å°Šæ•¬</p><p>é‡åˆ°çš„åŒäº‹å¤§å¤šéƒ½å‹å–„</p><p>é‡åˆ°çš„å‰ä»»å€¼å¾—æˆ‘æ„Ÿè°¢</p><p>ä¸ç®¡æ˜¯è‡ªå·±é€‰æ‹©è¿˜æ˜¯è¢«å¤–ç•Œæ¨ç€</p><p>ä¹Ÿç®—å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿</p><p>è¿™ä¸ªè¯•ä¸€è¯•é‚£ä¸ªè¯•ä¸€è¯•</p><p>è™½ç„¶éƒ½åšå¾—ä¸å¥½ä½†ä¹Ÿä¹åœ¨å…¶ä¸­</p><p>èƒ½æŒ£åˆ°ä¸€ç‚¹é’±åœ¨è‡ªå·±æƒ³åƒä»€ä¹ˆçš„æ—¶å€™å°±å»åƒ</p><p>èƒ½æ”’åˆ°ä¸€ç‚¹é’±ç»™å§¥å§¥å‘çº¢åŒ…ã€ç»™å®¶äººä¹°ç¤¼ç‰©</p><p>èƒ½æƒ³åœ¨åºŠä¸Šç˜«ç€å°±ç˜«ä¸€æ•´å¤©</p><p>ä¸­åˆä¼šå‡†æ—¶æ¥åˆ°å¦ˆå¦ˆè§†é¢‘æé†’æˆ‘è¯¥åƒåˆé¥­äº†</p><p>å¶å°”ç»™è‡ªå·±æ‰“é¸¡è¡€å°±å†²å‡ºå»é€›é€›è¡—çœ‹çœ‹æ™¯</p><p>æˆ‘æœ‰ç‚¹å¹¸ç¦å‘€â¤â¤â¤</p>]]></content>
      
      
      <categories>
          
          <category> Eat Pray Love </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Thinking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨é‡ç­–ç•¥</title>
      <link href="/2023/03/21/%E5%8A%A8%E9%87%8F%E7%AD%96%E7%95%A5/"/>
      <url>/2023/03/21/%E5%8A%A8%E9%87%8F%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å†…å®¹åŸºäº<a href="https://uqer.datayes.com/">ä¼˜çŸ¿å¹³å°</a>å®ç°ï¼Œä¸ºåœ¨æ ¡è¯¾ç¨‹ä½œä¸šï¼Œä»æœ‰è¾ƒå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><h3 id="è®¾ç½®åŸºæœ¬å‚æ•°"><a href="#è®¾ç½®åŸºæœ¬å‚æ•°" class="headerlink" title="è®¾ç½®åŸºæœ¬å‚æ•°"></a>è®¾ç½®åŸºæœ¬å‚æ•°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> datetime, math</span><br><span class="line"><span class="keyword">from</span> CAL.PyCAL <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> quartz_extensions <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedalta</span><br><span class="line"></span><br><span class="line">form_period = <span class="number">1</span></span><br><span class="line">hold_periond = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">start = <span class="string">&#x27;2013-01-01&#x27;</span></span><br><span class="line">end = <span class="string">&#x27;2021-12-31&#x27;</span></span><br><span class="line">benchmark = <span class="string">&#x27;HS300&#x27;</span></span><br><span class="line">universe_type = <span class="string">&#x27;HS300&#x27;</span></span><br><span class="line">universe = set_universe(universe_type)</span><br><span class="line">refresh_rate = Monthly(<span class="number">1</span>)</span><br><span class="line">freq = <span class="string">&#x27;d&#x27;</span></span><br><span class="line">industry_type = <span class="string">&#x27;SW1&#x27;</span></span><br><span class="line"></span><br><span class="line">slippage = Slippage(value=<span class="number">0.001</span>, unit=<span class="string">&#x27;perValue&#x27;</span>)</span><br><span class="line">commission = Commission(buycost=<span class="number">0.001</span>, sellcost=<span class="number">0.002</span>, unit=<span class="string">&#x27;perValue&#x27;</span>)</span><br><span class="line">accounts = &#123;<span class="string">&#x27;stock_account&#x27;</span>:AccountConfig(account_type=<span class="string">&#x27;security&#x27;</span>,capital_base=<span class="number">10000000</span>,commission=commission,slippage=slippage)&#125;</span><br></pre></td></tr></table></figure><h3 id="å»æå€¼"><a href="#å»æå€¼" class="headerlink" title="å»æå€¼"></a>å»æå€¼</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">winsorize_factor</span>(<span class="params">data,col,win_type=<span class="string">&#x27;NormDistDraw&#x27;</span>,n_draw=<span class="number">5</span></span>):</span><br><span class="line">    after_winsorize = winsorize(data[col].to_dict(),win_type=win_type,n_draw=n_draw)</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> after_winsorize.items():</span><br><span class="line">        data.loc[key,col] = value</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ€§åŒ–"><a href="#ä¸­æ€§åŒ–" class="headerlink" title="ä¸­æ€§åŒ–"></a>ä¸­æ€§åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">neutralize_factor</span>(<span class="params">data,col,target_date,industry_type=<span class="string">&#x27;SW1&#x27;</span>,exclude_style_list=[]</span>):</span><br><span class="line">    after_neutralize = neutralize(data[col].to_dict(),target_date=target_date,industry_type=industry_type,exclude_style_list=exclude_style_list)</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> after_neutralize.items():</span><br><span class="line">        data.loc[key,col] = value</span><br></pre></td></tr></table></figure><h3 id="æ ‡å‡†åŒ–"><a href="#æ ‡å‡†åŒ–" class="headerlink" title="æ ‡å‡†åŒ–"></a>æ ‡å‡†åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">standardize_factor</span>(<span class="params">data,col</span>):</span><br><span class="line">    after_standardize = standardize(data[col].to_dict())</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> after_standardize.items():</span><br><span class="line">        data.loc[key,col] = value</span><br></pre></td></tr></table></figure><h3 id="ç­–ç•¥ä¸»ä½“"><a href="#ç­–ç•¥ä¸»ä½“" class="headerlink" title="ç­–ç•¥ä¸»ä½“"></a>ç­–ç•¥ä¸»ä½“</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">context</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handle_data</span>(<span class="params">context</span>):</span><br><span class="line">    account = context.get_account(<span class="string">&#x27;stock_account&#x27;</span>)</span><br><span class="line">    universe = context.get_universe(asset_type=<span class="string">&#x27;stock&#x27;</span>,exclude_halt=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    beginDate = context.current_date + relativedelta(months=-from_period)</span><br><span class="line">    endDate = context.current_date</span><br><span class="line">    data = DataAPI.MktEqudGet(secID=universe,beginDate=beginDate,endDate=endDate,pandas=<span class="string">&quot;1&quot;</span>,field=[<span class="string">&#x27;secID&#x27;</span>,<span class="string">&#x27;tradeDate&#x27;</span>,<span class="string">&#x27;closePrice&#x27;</span>]).set_index(<span class="string">&#x27;secID&#x27;</span>).dropna()</span><br><span class="line">    </span><br><span class="line">    factors = &#123;<span class="string">&#x27;symbol&#x27;</span>:[],<span class="string">&#x27;return&#x27;</span>:[]&#125;</span><br><span class="line">    symbols = <span class="built_in">list</span>(<span class="built_in">set</span>(data._stat_axis.value.tolist()))</span><br><span class="line">    <span class="keyword">for</span> symbol <span class="keyword">in</span> symbols:</span><br><span class="line">        factors[<span class="string">&#x27;symbol&#x27;</span>].append(symbol)</span><br><span class="line">        factors[<span class="string">&#x27;return&#x27;</span>].append(data.loc[symbol].iloc[-<span class="number">1</span>][<span class="string">&#x27;closePrice&#x27;</span>]/data.loc[symbol].iloc[<span class="number">0</span>][<span class="string">&#x27;closePrice&#x27;</span>])</span><br><span class="line">    factors = pd.DataFrame(factors).set_index(<span class="string">&#x27;symbol&#x27;</span>) </span><br><span class="line">    </span><br><span class="line">    winsorize_factor(factors,<span class="string">&#x27;return&#x27;</span>,win_type=<span class="string">&#x27;NormDistDraw&#x27;</span>,n_draw=<span class="number">5</span>)</span><br><span class="line">    neutralize_factor(factors,<span class="string">&#x27;return&#x27;</span>,target_date=context.current_date,industry_type=industry_type)</span><br><span class="line">    standardize_factor(factors,<span class="string">&#x27;return&#x27;</span>)</span><br><span class="line">    weights = long_only(factors[<span class="string">&#x27;return&#x27;</span>].to_dict(),target_date=context.current_date,industry_type=industry_type,universe_type=universe_type,select_type=<span class="number">1</span>,weight_type=<span class="number">1</span>,top_ratio=<span class="number">0.2</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> symbol <span class="keyword">in</span> account.get_positions():</span><br><span class="line">        <span class="keyword">if</span> symbol <span class="keyword">not</span> <span class="keyword">in</span> weights.keys():</span><br><span class="line">            account.order_to(symbol,<span class="number">0</span>)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">for</span> symbol,weight <span class="keyword">in</span> weights.items():</span><br><span class="line">        <span class="keyword">if</span> context.current_price &gt; <span class="number">0</span>:</span><br><span class="line">            value = weight*account.portfolio_value</span><br><span class="line">            share = <span class="built_in">int</span>(value/context.current_price(symbol)/<span class="number">100</span>)*<span class="number">100</span></span><br><span class="line">            account.order_to(symbol,share)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é‡åŒ–æŠ•èµ„ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Momentum strategy </tag>
            
            <tag> Quantitative investment </tag>
            
            <tag> Datayes! </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 7ï¼šçº¿æ€§å›å½’+åŸºç¡€ä¼˜åŒ–ç®—æ³•</title>
      <link href="/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07%EF%BC%9A%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92+%E5%9F%BA%E7%A1%80%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/"/>
      <url>/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A07%EF%BC%9A%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92+%E5%9F%BA%E7%A1%80%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 6ï¼šè‡ªåŠ¨æ±‚å¯¼</title>
      <link href="/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06%EF%BC%9A%E8%87%AA%E5%8A%A8%E6%B1%82%E5%AF%BC/"/>
      <url>/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A06%EF%BC%9A%E8%87%AA%E5%8A%A8%E6%B1%82%E5%AF%BC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å‘é‡é“¾å¼æ³•åˆ™"><a href="#å‘é‡é“¾å¼æ³•åˆ™" class="headerlink" title="å‘é‡é“¾å¼æ³•åˆ™"></a>å‘é‡é“¾å¼æ³•åˆ™</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211322600.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211324862.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211325228.png" alt=""></p><h3 id="è‡ªåŠ¨æ±‚å¯¼"><a href="#è‡ªåŠ¨æ±‚å¯¼" class="headerlink" title="è‡ªåŠ¨æ±‚å¯¼"></a>è‡ªåŠ¨æ±‚å¯¼</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211328680.png" style="zoom: 67%;" /></p><h3 id="è®¡ç®—å›¾"><a href="#è®¡ç®—å›¾" class="headerlink" title="è®¡ç®—å›¾"></a>è®¡ç®—å›¾</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211329261.png" style="zoom: 67%;" /></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mxnet impot sym</span><br><span class="line"></span><br><span class="line">a = sym.var()</span><br><span class="line">b = sym.var()</span><br><span class="line">c = <span class="number">2</span>*a+b</span><br><span class="line"><span class="comment"># bind data into a and b later</span></span><br></pre></td></tr></table></figure><p>æ˜¾å¼æ„é€ ï¼šTensorflow/Theano/MXNet</p><p>éšå¼æ„é€ ï¼šPyTorch/MXNet</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mxnet <span class="keyword">import</span> autograd, nd</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> autograd.record():</span><br><span class="line">    a = nd.ones((<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">    b = nd.ones((<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">    c = <span class="number">2</span>*a+b</span><br></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨æ±‚å¯¼çš„ä¸¤ç§æ¨¡å¼"><a href="#è‡ªåŠ¨æ±‚å¯¼çš„ä¸¤ç§æ¨¡å¼" class="headerlink" title="è‡ªåŠ¨æ±‚å¯¼çš„ä¸¤ç§æ¨¡å¼"></a>è‡ªåŠ¨æ±‚å¯¼çš„ä¸¤ç§æ¨¡å¼</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211335555.png" style="zoom: 67%;" /></p><h3 id="åå‘ç´¯ç§¯å¤æ‚åº¦"><a href="#åå‘ç´¯ç§¯å¤æ‚åº¦" class="headerlink" title="åå‘ç´¯ç§¯å¤æ‚åº¦"></a>åå‘ç´¯ç§¯å¤æ‚åº¦</h3><p>è®¡ç®—å¤æ‚åº¦ï¼šO(n)ï¼Œnæ˜¯æ“ä½œå­ä¸ªæ•°ã€‚é€šå¸¸æ­£å‘å’Œåå‘çš„ä»£ä»·ç±»ä¼¼ã€‚</p><p>å†…å­˜å¤æ‚åº¦ï¼šO(n)ï¼Œå› ä¸ºéœ€è¦å­˜å‚¨æ­£å‘çš„æ‰€æœ‰ä¸­é—´ç»“æœã€‚</p><p>å’Œæ­£å‘ç´¯ç§¯å¯¹æ¯”ï¼šO(n)è®¡ç®—å¤æ‚åº¦ç”¨æ¥è®¡ç®—ä¸€ä¸ªå˜é‡çš„æ¢¯åº¦ï¼›O(1)å†…å­˜å¤æ‚åº¦ã€‚</p><h3 id="è‡ªåŠ¨æ±‚å¯¼å®ç°"><a href="#è‡ªåŠ¨æ±‚å¯¼å®ç°" class="headerlink" title="è‡ªåŠ¨æ±‚å¯¼å®ç°"></a>è‡ªåŠ¨æ±‚å¯¼å®ç°</h3><p>å‡è®¾ç›¸å¯¹å‡½æ•°$y=2x^T x$ï¼Œå…³äºåˆ—å‘é‡xæ±‚å¯¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.arange(<span class="number">4.0</span>)</span><br><span class="line">x</span><br></pre></td></tr></table></figure><p>åœ¨è®¡ç®—yå…³äºxçš„æ¢¯åº¦ä¹‹å‰ï¼Œéœ€è¦ä¸€ä¸ªåœ°æ–¹æ¥å­˜å‚¨æ¢¯åº¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.requires_grad_(<span class="literal">True</span>)</span><br><span class="line">x.grad  <span class="comment">#é»˜è®¤å€¼æ˜¯None</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è®¡ç®—y</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y = <span class="number">2</span>*torch.dot(x, x)</span><br><span class="line">y</span><br></pre></td></tr></table></figure><p>é€šè¿‡è°ƒç”¨åå‘ä¼ æ’­å‡½æ•°æ¥è‡ªåŠ¨è®¡ç®—yå…³äºxæ¯ä¸ªåˆ†é‡çš„æ¢¯åº¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y.backward()</span><br><span class="line">x.grad</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.grad == <span class="number">4</span>*x</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è®¡ç®—xçš„å¦ä¸€ä¸ªå‡½æ•°</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.grad.zero_()  <span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼ŒPyTorchä¼šç´¯ç§¯æ¢¯åº¦ï¼Œæ‰€ä»¥éœ€è¦æ¸…é™¤ä¹‹å‰çš„å€¼</span></span><br><span class="line">y = x.<span class="built_in">sum</span>()</span><br><span class="line">y.backward()</span><br><span class="line">x.grad</span><br></pre></td></tr></table></figure><p>æ·±åº¦å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çš„ç›®çš„ä¸æ˜¯è®¡ç®—å¾®åˆ†çŸ©é˜µï¼Œè€Œæ˜¯æ‰¹é‡ä¸­æ¯ä¸ªæ ·æœ¬å•ç‹¬è®¡ç®—çš„åå¯¼æ•°ä¹‹å’Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.grad.zero_()</span><br><span class="line">y = x * x</span><br><span class="line">y.<span class="built_in">sum</span>().backward()</span><br><span class="line">x.grad</span><br></pre></td></tr></table></figure><p>å°†æŸäº›è®¡ç®—ç§»åŠ¨åˆ°è®°å½•çš„è®¡ç®—å›¾ä¹‹å¤–</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.grad.zero_()</span><br><span class="line">y = x * x</span><br><span class="line">u = y.detach()</span><br><span class="line">z = u * x</span><br><span class="line"></span><br><span class="line">z.<span class="built_in">sum</span>().backward()</span><br><span class="line">x.grad == u</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.grad.zero_()</span><br><span class="line">y.<span class="built_in">sum</span>().backward()</span><br><span class="line">x.grad == <span class="number">2</span>*x</span><br></pre></td></tr></table></figure><p>å³ä½¿æ„å»ºå‡½æ•°çš„è®¡ç®—å›¾éœ€è¦é€šè¿‡Pythonæ§åˆ¶æµï¼ˆä¾‹å¦‚ï¼Œæ¡ä»¶ã€å¾ªç¯æˆ–ä»»æ„å‡½æ•°è°ƒç”¨ï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¡ç®—å¾—åˆ°çš„å˜é‡çš„æ¢¯åº¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a</span>):</span><br><span class="line">    b = a * <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> b.norm() &lt; <span class="number">1000</span>:</span><br><span class="line">        b = b * <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> b.<span class="built_in">sum</span>() &gt; <span class="number">0</span>:</span><br><span class="line">        c = b</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        c = <span class="number">100</span> * b</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"></span><br><span class="line">a = torch.randn(size=(),requires_grad=<span class="literal">True</span>)</span><br><span class="line">d = f(a)</span><br><span class="line">d.backward()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 5ï¼šçŸ©é˜µè®¡ç®—</title>
      <link href="/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05%EF%BC%9A%E7%9F%A9%E9%98%B5%E8%AE%A1%E7%AE%97/"/>
      <url>/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A05%EF%BC%9A%E7%9F%A9%E9%98%B5%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="æ ‡é‡å¯¼æ•°"><a href="#æ ‡é‡å¯¼æ•°" class="headerlink" title="æ ‡é‡å¯¼æ•°"></a>æ ‡é‡å¯¼æ•°</h3><p><img src="C:/Users/yumiaomiao/Desktop/12.png" alt=""></p><h3 id="äºšå¯¼æ•°"><a href="#äºšå¯¼æ•°" class="headerlink" title="äºšå¯¼æ•°"></a>äºšå¯¼æ•°</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211310820.png" alt=""></p><h3 id="æ¢¯åº¦"><a href="#æ¢¯åº¦" class="headerlink" title="æ¢¯åº¦"></a>æ¢¯åº¦</h3><p>xæ˜¯å‘é‡ï¼Œyæ˜¯æ ‡é‡æ—¶ï¼š</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211313343.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211315562.png" alt=""></p><p>yæ˜¯åˆ—å‘é‡ï¼Œxæ˜¯æ ‡é‡æ—¶ï¼š</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211316941.png" alt=""></p><p>xã€yå‡ä¸ºå‘é‡æ—¶ï¼š</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211317139.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211318888.png" alt=""></p><h3 id="æ‹“å±•åˆ°çŸ©é˜µ"><a href="#æ‹“å±•åˆ°çŸ©é˜µ" class="headerlink" title="æ‹“å±•åˆ°çŸ©é˜µ"></a>æ‹“å±•åˆ°çŸ©é˜µ</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211320884.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 4ï¼šçº¿æ€§ä»£æ•°</title>
      <link href="/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04%EF%BC%9A%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"/>
      <url>/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A04%EF%BC%9A%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210949230.png" alt=""></p><h3 id="æ ‡é‡"><a href="#æ ‡é‡" class="headerlink" title="æ ‡é‡"></a>æ ‡é‡</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210950495.png" style="zoom:50%;" /></p><h3 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a>å‘é‡</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210950623.png" style="zoom:50%;" /></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210952829.png" style="zoom:50%;" /></p><h3 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210953225.png" style="zoom:50%;" /></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210953672.png" style="zoom:50%;" /></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210956144.png" style="zoom:50%;" /></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210959556.png" style="zoom:50%;" /></p><h3 id="ç‰¹æ®ŠçŸ©é˜µ"><a href="#ç‰¹æ®ŠçŸ©é˜µ" class="headerlink" title="ç‰¹æ®ŠçŸ©é˜µ"></a>ç‰¹æ®ŠçŸ©é˜µ</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211001890.png" style="zoom:50%;" /></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210958444.png" style="zoom:50%;" /></p><h3 id="çº¿æ€§ä»£æ•°å®ç°"><a href="#çº¿æ€§ä»£æ•°å®ç°" class="headerlink" title="çº¿æ€§ä»£æ•°å®ç°"></a>çº¿æ€§ä»£æ•°å®ç°</h3><p>æ ‡é‡ç”±åªæœ‰ä¸€ä¸ªå…ƒç´ çš„å¼ é‡è¡¨ç¤º</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.tensor([<span class="number">3.0</span>])</span><br><span class="line">y = torch.tensor([<span class="number">2.0</span>])</span><br><span class="line"></span><br><span class="line">x+y, x*y, x/y, x**y</span><br></pre></td></tr></table></figure><p>å¯ä»¥å°†å‘é‡è§†ä¸ºæ ‡é‡å€¼ç»„æˆçš„åˆ—è¡¨</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.arrange(<span class="number">4</span>)</span><br><span class="line">x</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¼ é‡çš„ç´¢å¼•æ¥è®¿é—®ä»»ä¸€å…ƒç´ </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x[<span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>è®¿é—®å¼ é‡çš„é•¿åº¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">len</span>(x)</span><br></pre></td></tr></table></figure><p>åªæœ‰ä¸€ä¸ªè½´çš„å¼ é‡ï¼Œå½¢çŠ¶åªæœ‰ä¸€ä¸ªå…ƒç´ </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.shape</span><br></pre></td></tr></table></figure><p>é€šè¿‡æŒ‡å®šä¸¤ä¸ªåˆ†é‡må’Œnæ¥åˆ›å»ºä¸€ä¸ªå½¢çŠ¶ä¸ºm*nçš„çŸ©é˜µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = torch.arange(<span class="number">20</span>).reshape(<span class="number">5</span>,<span class="number">4</span>)</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p>çŸ©é˜µçš„è½¬ç½®</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.T</span><br></pre></td></tr></table></figure><p>å¯¹ç§°çŸ©é˜µç­‰äºå…¶è½¬ç½®</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">B = torch.tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">0</span>,<span class="number">4</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line">B</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">B == B.T</span><br></pre></td></tr></table></figure><p>å°±åƒå‘é‡æ˜¯æ ‡é‡çš„æ¨å¹¿ï¼ŒçŸ©é˜µæ˜¯å‘é‡çš„æ¨å¹¿ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå…·æœ‰æ›´å¤šè½´çš„æ•°æ®ç»“æ„</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X = torch.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)  <span class="comment"># 2ç»´3è¡Œ4åˆ—</span></span><br><span class="line">X</span><br></pre></td></tr></table></figure><p>ç»™å®šå…·æœ‰ç›¸åŒå½¢çŠ¶çš„ä»»ä½•ä¸¤ä¸ªå¼ é‡ï¼Œä»»ä½•æŒ‰å…ƒç´ äºŒå…ƒè¿ç®—çš„ç»“æœéƒ½å°†æ˜¯ç›¸åŒå½¢çŠ¶çš„å¼ é‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = torch.arange(<span class="number">20</span>, dtype=torch.float32).reshape(<span class="number">5</span>,<span class="number">4</span>)</span><br><span class="line">B = A.clone()  <span class="comment">#é€šè¿‡åˆ†é…æ–°å†…å­˜ï¼Œå°†Açš„ä¸€ä¸ªå‰¯æœ¬åˆ†é…ç»™B</span></span><br><span class="line">A, A+B</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªçŸ©é˜µçš„æŒ‰å…ƒç´ ä¹˜æ³•æˆä¸º<strong>å“ˆè¾¾ç›ç§¯Hadamard product</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A * B</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">2</span></span><br><span class="line">X = torch.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">a + X, (a * X).shape</span><br></pre></td></tr></table></figure><p>è®¡ç®—å…¶å…ƒç´ çš„å’Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.arange(<span class="number">4</span>, dtype=torch.float32)</span><br><span class="line">x, x.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºä»»æ„å½¢çŠ¶å¼ é‡çš„å…ƒç´ å’Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.shape, A.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><p>æŒ‡å®šæ±‚å’Œæ±‡æ€»å¼ é‡çš„è½´</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A_sum_axis0 = A.<span class="built_in">sum</span>(axis=<span class="number">0</span>)</span><br><span class="line">A_sum_axis0, A_sum_axis0.shape</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A_sum_axis1 = A.<span class="built_in">sum</span>(axis=<span class="number">1</span>)  <span class="comment">#axis=0ä»£è¡¨è·¨è¡Œï¼Œaxis=1ä»£è¡¨è·¨åˆ—</span></span><br><span class="line">A_sum_axis1, A_sum_axis1.shape</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.<span class="built_in">sum</span>(axis=[<span class="number">0</span>,<span class="number">1</span>])  <span class="comment">#same as &#x27;A.sum()&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªä¸æ±‚å’Œç›¸å…³çš„é‡æ˜¯å¹³å‡å€¼mean/average</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.mean(), A.<span class="built_in">sum</span>() / A.numel</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.mean(axis=<span class="number">0</span>), A.<span class="built_in">sum</span>(axis=<span class="number">0</span>) / A.shape[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>è®¡ç®—æ€»å’Œæˆ–å‡å€¼æ—¶ä¿æŒè½´æ•°ä¸å˜</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sum_A = A.<span class="built_in">sum</span>(axis=<span class="number">1</span>, keepdims=<span class="literal">True</span>)  <span class="comment">#keepdimsé»˜è®¤ä¸ºFalse</span></span><br><span class="line">sum_A</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211304425.png" alt=""></p><p>é€šè¿‡å¹¿æ’­å°†Aé™¤ä»¥sum_A</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A / sum_A  <span class="comment">#å¹¿æ’­æœºåˆ¶éœ€è¦ä¿è¯Açš„ç»´åº¦å’Œsum_Açš„ç»´åº¦ä¸€æ ·</span></span><br></pre></td></tr></table></figure><p>æŸä¸ªè½´è®¡ç®—Aå…ƒç´ çš„ç´¯ç§¯æ€»å’Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.cumsum(axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>ç‚¹ç§¯æ˜¯ç›¸åŒä½ç½®çš„æŒ‰å…ƒç´ ä¹˜ç§¯çš„å’Œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y = torch.ones(<span class="number">4</span>, dtype=torch.<span class="built_in">float</span>(<span class="number">32</span>))</span><br><span class="line">x, y, torch.dot(x,y)  <span class="comment">#dotè¡¨ç¤ºç‚¹ç§¯</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰§è¡ŒæŒ‰å…ƒç´ ä¹˜æ³•ï¼Œç„¶åè¿›è¡Œæ±‚å’Œæ¥è¡¨ç¤ºä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.<span class="built_in">sum</span>(x * y)</span><br></pre></td></tr></table></figure><p>çŸ©é˜µå‘é‡ç§¯Axæ˜¯ä¸€ä¸ªé•¿åº¦ä¸ºmçš„åˆ—å‘é‡ï¼Œå…¶ä¸­$i^{th}\$å…ƒç´ æ˜¯ç‚¹ç§¯$a^T_ {i}$ x</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A.shape, x.shape, torch.mv(A, x)</span><br></pre></td></tr></table></figure><p>å°†çŸ©é˜µ-çŸ©é˜µä¹˜æ³•ABçœ‹ä½œæ˜¯ç®€å•åœ°æ‰§è¡Œmæ¬¡çŸ©é˜µ-å‘é‡ç§¯ï¼Œå¹¶å°†ç»“æœæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªn*mçŸ©é˜µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">B = torch.ones(<span class="number">4</span>, <span class="number">3</span>)</span><br><span class="line">torch.mm(A, B)</span><br></pre></td></tr></table></figure><p>$L_2$èŒƒæ•°æ˜¯å‘é‡å…ƒç´ å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ï¼š$||x||_2$=$\sqrt{\sum_1^n x_i^{2}}$</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">u = torch.tensor([<span class="number">3.0</span>, -<span class="number">4.0</span>])</span><br><span class="line">torch.norm(u)</span><br></pre></td></tr></table></figure><p>$L_1$èŒƒæ•°æ˜¯å‘é‡å…ƒç´ å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ï¼š$||x||_1$=$\sum_1^n |x_i|$</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.<span class="built_in">abs</span>(u).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><p>çŸ©é˜µçš„<strong>ä½›ç½—è´å°¼ä¹Œæ–¯èŒƒæ•°Frobenius norm</strong>æ˜¯çŸ©é˜µå…ƒç´ çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ï¼š$||X||<em>F$=$\sqrt{\sum_1^m \sum_1^n x^2</em>{ij}}$</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.norm(torch.ones((<span class="number">4</span>, <span class="number">9</span>)))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 3ï¼šæ•°æ®é¢„å¤„ç†</title>
      <link href="/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03%EF%BC%9A%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/"/>
      <url>/2023/03/21/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A03%EF%BC%9A%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ›å»ºä¸€ä¸ªäººå·¥æ•°æ®é›†ï¼Œå¹¶å­˜å‚¨åœ¨csvæ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.makedirs(os.path.join(<span class="string">&#x27;..&#x27;</span>,<span class="string">&#x27;data&#x27;</span>).exist_ok=<span class="literal">True</span>)</span><br><span class="line">data_file = os.path.join(<span class="string">&#x27;..&#x27;</span>,<span class="string">&#x27;data&#x27;</span>,<span class="string">&#x27;house_tiny.csv&#x27;</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(data_file,<span class="string">&#x27;w&#x27;</span>)<span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;NumRooms,Alley,Price\n&#x27;</span>)  <span class="comment">#åˆ—å</span></span><br><span class="line">    f.write(<span class="string">&#x27;NA,Pave,127500\n&#x27;</span>)  <span class="comment">#æ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ•°æ®æ ·æœ¬</span></span><br><span class="line">    f.write(<span class="string">&#x27;2,NA,106000\n&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;4,NA,178100\n&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;NA,NA,140000\n&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä»åˆ›å»ºçš„csvæ–‡ä»¶ä¸­åŠ è½½åŸå§‹æ•°æ®é›†</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæ²¡æœ‰å®‰è£…pandasï¼Œåªéœ€å–æ¶ˆå¯¹ä»¥ä¸‹è¡Œçš„æ³¨é‡Šï¼š</span></span><br><span class="line"><span class="comment"># !pip install pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(data_file)  <span class="comment">#pandasæä¾›read_csv</span></span><br><span class="line">data</span><br></pre></td></tr></table></figure><p>å¤„ç†ç¼ºå¤±çš„æ•°æ®ï¼Œå…¸å‹çš„æ–¹æ³•åŒ…æ‹¬æ’å€¼å’Œåˆ é™¤ï¼Œä¸‹é¢ä¸ºæ’å€¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">inputs,outputs = data.iloc[:,<span class="number">0</span>:<span class="number">2</span>],data.iloc[:,<span class="number">2</span>]</span><br><span class="line"><span class="comment"># index locationï¼Œé€šè¿‡è¡Œå·æ¥å–è¡Œæ•°æ®ï¼ˆå¦‚å–ç¬¬äºŒè¡Œçš„æ•°æ®ï¼‰</span></span><br><span class="line">inputs = inputs.fillna(inputs.mean())  <span class="comment">#æŠŠæ‰€æœ‰NAå€¼å¡«æˆmeanå€¼</span></span><br><span class="line"><span class="built_in">print</span>(inputs)</span><br></pre></td></tr></table></figure><p>å¯¹äºinputsä¸­çš„ç±»åˆ«å€¼æˆ–ç¦»æ•£å€¼ï¼Œå°†â€œNaNâ€è§†ä¸ºä¸€ä¸ªç±»åˆ«</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">inputs = pd.get_dummies(inputs, dummy_na=<span class="literal">True</span>)  <span class="comment">#dummy</span></span><br><span class="line"><span class="built_in">print</span>(inputs)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303210935865.png" alt=""></p><p>ç°åœ¨inputså’Œoutputsä¸­æ‰€æœ‰æ¡ç›®éƒ½æ˜¯æ•°å€¼ç±»å‹ï¼Œå®ƒä»¬å¯ä»¥è½¬æ¢æˆå¼ é‡æ ¼å¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x,y = torch.tensor(inputs.values), torch.tensor(outputs.values)</span><br><span class="line">x,y</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡åŒ–æ‹©æ—¶â€”â€”æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼ˆä¸‰ï¼‰ï¼šæ”¹è¿›</title>
      <link href="/2023/03/20/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%89%EF%BC%89%E6%94%B9%E8%BF%9B/"/>
      <url>/2023/03/20/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%89%EF%BC%89%E6%94%B9%E8%BF%9B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å†…å®¹åŸºäº<a href="https://uqer.datayes.com/">ä¼˜çŸ¿å¹³å°</a>å®ç°ï¼Œä¸ºåœ¨æ ¡è¯¾ç¨‹ä½œä¸šï¼Œä»æœ‰è¾ƒå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><h3 id="æ”¹è¿›å†…å®¹"><a href="#æ”¹è¿›å†…å®¹" class="headerlink" title="æ”¹è¿›å†…å®¹"></a>æ”¹è¿›å†…å®¹</h3><ul><li><p>å¤§ç›˜æ¶¨è·Œåˆ¤æ–­</p><p>åŸæŠŠ30å¤©åçš„æ¶¨è·Œç®—ä½œå¤§ç›˜æŒ‡æ•°æ¶¨è·Œï¼Œå®¹æ˜“è®©æ¨¡å‹æ‹Ÿåˆå™ªéŸ³ã€‚æœ¬æ–‡å¯¹å…¶è¿›è¡Œé˜ˆå€¼çš„è®¾å®šï¼Œé«˜äº10%çš„é˜ˆå€¼æ‰è®¤ä¸ºå¤§ç›˜åœ¨æ¶¨ï¼Œä½äº10%æ‰è®¤ä¸ºå¤§ç›˜åœ¨è·Œã€‚</p></li><li><p>å‚æ•°å¯»ä¼˜</p><p>åŸåœ¨å¯»æ‰¾æœ€ä¼˜Cå€¼çš„è¿‡ç¨‹ä¸­ï¼Œè®¾å®šiçš„èŒƒå›´åœ¨300-400ä¹‹é—´ï¼ŒC=iï¼Œå³Cçš„é€‰å–èŒƒå›´ä¹Ÿåœ¨300-400ä¹‹é—´ï¼›åœ¨å¯»æ‰¾æœ€ä¼˜gammaå€¼çš„è¿‡ç¨‹ä¸­ï¼Œè®¾å®šiçš„èŒƒå›´åœ¨100-200ä¹‹é—´ï¼Œgamma=i/100ï¼Œå³gammaçš„é€‰å–èŒƒå›´åœ¨1-2ä¹‹é—´ã€‚</p><p>èŒƒå›´è¿‡å°ï¼Œæœ¬æ–‡è®¾å®šiçš„èŒƒå›´åœ¨1-1000ä¹‹é—´ã€‚Cå€¼å¯»ä¼˜è¿‡ç¨‹ä¸­ï¼ŒC=i/10ï¼Œå³Cçš„èŒƒå›´åœ¨0-100ä¹‹é—´ï¼›gammaå€¼å¯»ä¼˜è¿‡ç¨‹ä¸­ï¼Œgamma=iï¼Œå³Cçš„èŒƒå›´åœ¨0-1000ä¹‹é—´ã€‚</p></li></ul><h3 id="æ•°æ®è·å–"><a href="#æ•°æ®è·å–" class="headerlink" title="æ•°æ®è·å–"></a>æ•°æ®è·å–</h3><p>è·å–2013.3.1-2018.3.31ç›¸å…³æŒ‡æ ‡æ•°æ®ï¼Œåˆ¤æ–­30å¤©åçš„æ¶¨è·Œã€‚</p><p>è®¾å®š30å¤©åçš„æ¶¨å¹…å¤§äº10%è®¤ä¸ºå¤§ç›˜åœ¨æ¶¨ï¼Œè·Œå¹…å¤§äº10%è®¤ä¸ºå¤§ç›˜åœ¨è·Œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">min_arr</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        se = talib.MIN(np.array(arr),<span class="number">30</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        se = np.array([np.nan]*<span class="built_in">len</span>(arr))</span><br><span class="line">    <span class="keyword">return</span> se</span><br><span class="line">fields = [<span class="string">&#x27;tradeDate&#x27;</span>,<span class="string">&#x27;closeIndex&#x27;</span>,<span class="string">&#x27;highestIndex&#x27;</span>,<span class="string">&#x27;lowestIndex&#x27;</span>,<span class="string">&#x27;turnoverVol&#x27;</span>,<span class="string">&#x27;CHG&#x27;</span>,<span class="string">&#x27;CHGPct&#x27;</span>]</span><br><span class="line">stock = <span class="string">&#x27;00300&#x27;</span></span><br><span class="line"></span><br><span class="line">index_raw = DataAPI.MktIdxdGet(ticker=stock,beginDate=<span class="string">u&#x27;2013-03-01&#x27;</span>,endDate=<span class="string">u&#x27;2018-03-31&#x27;</span>,field=fields,panndas=<span class="string">&quot;1&quot;</span>)</span><br><span class="line">index_date = index_raw.set_index(<span class="string">&#x27;tradeDate&#x27;</span>)</span><br><span class="line">index_date = index_rate.dropna()</span><br><span class="line">index_date[<span class="string">&#x27;max_difference&#x27;</span>] = index_date[<span class="string">&#x27;highestIndex&#x27;</span>] - index_date[<span class="string">&#x27;lowestIndex&#x27;</span>]</span><br><span class="line">index_date[<span class="string">&#x27;max_of_30day&#x27;</span>] = index_date.apply(max_arr)[<span class="string">&#x27;highestIndex&#x27;</span>]</span><br><span class="line">index_date[<span class="string">&#x27;min_of_30day&#x27;</span>] = index_date.apply(min_arr)[<span class="string">&#x27;lowestIndex&#x27;</span>]</span><br><span class="line">index_date[<span class="string">&#x27;max_difference_of_30day&#x27;</span>] = index_date.apply(max_arr)[<span class="string">&#x27;max_difference&#x27;</span>]</span><br><span class="line">index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>] = np.nan</span><br><span class="line">index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>][<span class="number">0</span>:-<span class="number">30</span>] = np.array(index_date[<span class="string">&#x27;closeIndex&#x27;</span>][<span class="number">30</span>:])</span><br><span class="line">index_date = index_date.dropna()</span><br><span class="line">index_date[(index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]&lt;index_date[<span class="string">&#x27;closeIndex&#x27;</span>]*<span class="number">1.1</span>)&amp;(index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]&gt;index_date[<span class="string">&#x27;closeIndex&#x27;</span>]*<span class="number">0.9</span>)] = np.nan</span><br><span class="line">index_date = index_date.dropna()</span><br><span class="line">index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>][index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]&gt;index_date[<span class="string">&#x27;closeIndex&#x27;</span>]*<span class="number">1.1</span>] = <span class="string">&quot;up&quot;</span></span><br><span class="line">index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>][index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]&lt;index_date[<span class="string">&#x27;closeIndex&#x27;</span>]*<span class="number">0.9</span>] = <span class="string">&quot;down&quot;</span></span><br><span class="line">index_date = index_date.dropna()</span><br><span class="line">lables = index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]</span><br><span class="line">featruns = index_date.drop([<span class="string">&#x27;closeIndex_after30days&#x27;</span>],axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ ‡å‡†åŒ–"><a href="#æ•°æ®æ ‡å‡†åŒ–" class="headerlink" title="æ•°æ®æ ‡å‡†åŒ–"></a>æ•°æ®æ ‡å‡†åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> corss_validation</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> AdaBoostClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"></span><br><span class="line">scaler = preprocessing.StandardScaler().fit(features)</span><br><span class="line">features_scaler = scaler.transform(features)</span><br><span class="line">X_train,X_test,y_train,y_test = cross_validation.train_test_split(features_scaler,lables,test_size=<span class="number">0.2</span>,random_state=<span class="number">0</span>)</span><br></pre></td></tr></table></figure><h3 id="è·å–å‡†ç¡®ç‡"><a href="#è·å–å‡†ç¡®ç‡" class="headerlink" title="è·å–å‡†ç¡®ç‡"></a>è·å–å‡†ç¡®ç‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">clf_svm = svm.SVC()</span><br><span class="line">clf_svm.fit(X_train,y_train)</span><br><span class="line"><span class="built_in">print</span><span class="string">&quot;æ ·æœ¬å†…é¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š%0.2f&quot;</span>%(clf_svm.score(X_test,y_test))</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°å¯»ä¼˜"><a href="#å‚æ•°å¯»ä¼˜" class="headerlink" title="å‚æ•°å¯»ä¼˜"></a>å‚æ•°å¯»ä¼˜</h3><p>é¦–å…ˆï¼Œè°ƒCå€¼ï¼Œè®¾å®šiå€¼èŒƒå›´åœ¨1-1000ï¼ŒC=i/10ï¼Œå³Cå€¼çš„èŒƒå›´åœ¨0-100ä¹‹é—´ï¼Œå¯»æ‰¾Cå€¼çš„æœ€ä¼˜åŒºé—´ã€‚ç»“æœä¸º0-20ä¹‹é—´ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i_list = []</span><br><span class="line">score_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1</span>,<span class="number">1000</span>,<span class="number">1</span>):</span><br><span class="line">    i = i/<span class="number">10.</span></span><br><span class="line">    clf_svm = svm.SVC(C = i)</span><br><span class="line">    clf_svm.fit(X_train,y_train)</span><br><span class="line">    i_list.append(i)</span><br><span class="line">    score_list.append(clf_svm.score(X_test,y_test))</span><br><span class="line">    </span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;C_score&#x27;</span>:i_list,<span class="string">&#x27;in_sets&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;C_score&#x27;</span>,title=<span class="string">&#x27;accuracy change with C&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303202219009.png" alt=""></p><p>æ¥ä¸‹æ¥ï¼Œè°ƒgammaå€¼ï¼Œè®¾å®šiå€¼èŒƒå›´åœ¨1-1000ï¼Œgamma=iï¼Œå³gammaå€¼çš„èŒƒå›´åœ¨0-1000ä¹‹é—´ï¼Œå¯»æ‰¾gammaå€¼çš„æœ€ä¼˜åŒºé—´ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i_list = []</span><br><span class="line">score_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">1000</span>,<span class="number">1</span>):</span><br><span class="line">    i = i/<span class="number">1</span></span><br><span class="line">    clf_svm = svm.SVC(C=<span class="number">1</span>,gamma=<span class="number">1</span>)</span><br><span class="line">    clf_svm.fit(X_train,y_train)</span><br><span class="line">    i_list.append(i)</span><br><span class="line">    score_list.append(clf_svm.score(X_test,y_test))</span><br><span class="line">    </span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;gamma_score&#x27;</span>:i_list,<span class="string">&#x27;in_sets&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;gamma_score&#x27;</span>,title=<span class="string">&#x27;accuracy change with gamma&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œä½¿ç”¨grisearchCVåœ¨å‚æ•°ç›¸åº”èŒƒå›´å†…å¯»æ‰¾æœ€ä¼˜è§£ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.grid_search <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.cross_validation <span class="keyword">import</span> ShuffleSplit</span><br><span class="line">i = <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">200</span>,<span class="number">1</span>)</span><br><span class="line">params = &#123;<span class="string">&#x27;C&#x27;</span>:<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">20</span>,<span class="number">1</span>),<span class="string">&#x27;gamma&#x27;</span>:[x/<span class="number">100.</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">1</span>),<span class="string">&#x27;kernel&#x27;</span>:[<span class="string">&#x27;linear&#x27;</span>,<span class="string">&#x27;rbf&#x27;</span>,<span class="string">&#x27;sigmoid&#x27;</span>]]&#125;</span><br><span class="line"></span><br><span class="line">clf_svm = svm.SVC()</span><br><span class="line"></span><br><span class="line">grid = GridSearchCV(clf_svm,params)</span><br><span class="line">grid = grid.fit(X_train,y_train)</span><br><span class="line"><span class="built_in">print</span> grid.best_estimator</span><br></pre></td></tr></table></figure><p>ç»“æœä¸ºï¼šC=1ï¼Œgamma=0.01ï¼Œkernel=linearã€‚</p><h3 id="è®¡ç®—å‡†ç¡®ç‡"><a href="#è®¡ç®—å‡†ç¡®ç‡" class="headerlink" title="è®¡ç®—å‡†ç¡®ç‡"></a>è®¡ç®—å‡†ç¡®ç‡</h3><p>åœ¨æœ€ä¼˜è§£çš„åŸºç¡€ä¸Šå†æ¬¡è®¡ç®—å‡†ç¡®ç‡ï¼Œç»“æœä¸º0.92ï¼Œé«˜äºå‚æ•°å¯»ä¼˜å‰çš„é¢„æµ‹å‡†ç¡®ç‡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">clf_svm = svm.SVC(C=<span class="number">1</span>,gamma=<span class="number">0.01</span>,kernel=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">clf_svm.fit(X_train,y_train)</span><br><span class="line"><span class="built_in">print</span><span class="string">&quot;æ ·æœ¬å†…é¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š%0.2f&quot;</span> %(clf_svm.score(X_test,y_test))</span><br></pre></td></tr></table></figure><h3 id="æ¨¡å‹å›æµ‹"><a href="#æ¨¡å‹å›æµ‹" class="headerlink" title="æ¨¡å‹å›æµ‹"></a>æ¨¡å‹å›æµ‹</h3><p>è¿ç”¨SVMé¢„æµ‹æ¨¡å‹é¢„æµ‹æ²ªæ·±300æŒ‡æ•°çš„èµ°åŠ¿ï¼Œæ“ä½œæ–¹æ³•æ˜¯æ¯æ—¥æ”¶ç›˜ååˆ¤æ–­æ²ªæ·±300æŒ‡æ•°æœªæ¥30å¤©çš„æ”¶ç›˜ä»·æ˜¯å¦å¤§äºè¿‘æ—¥çš„æ”¶ç›˜ä»·çš„10%ã€‚</p><p>å¦‚æœé¢„æµ‹å‡ºä¸Šæ¶¨ï¼Œåœ¨å½“ä¸‹ä¸€æ—¥çš„ä»·æ ¼ä½äºå‰ä¸€æ—¥æ”¶ç›˜ä»·æ—¶ï¼Œä¹°å…¥æ»¡è¶³æ¡ä»¶çš„è‚¡ç¥¨ï¼Œæ€»ä»·å€¼å è™šæ‹Ÿè´¦æˆ·çš„10%ï¼›å¦‚æœé¢„æµ‹å‡ºä¸‹è·Œæˆ–æ²¡æœ‰å˜åŒ–ï¼Œå½“ä¸‹ä¸€æ—¥çš„ä»·æ ¼æ¶¨å¹…åˆ°ä¹°å…¥ä»·çš„1.2å€æ—¶ï¼Œæ¸…ä»“å–å‡ºï¼Œæ¯æ—¥åªè¿›è¡Œä¸€æ¬¡äº¤æ˜“æˆ–ä¸è¿›è¡Œäº¤æ˜“ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”±äº¤æ˜“ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303202230791.png" alt=""></p><h3 id="æ¨¡å‹éªŒè¯"><a href="#æ¨¡å‹éªŒè¯" class="headerlink" title="æ¨¡å‹éªŒè¯"></a>æ¨¡å‹éªŒè¯</h3><h4 id="æ•°æ®é€‰å–"><a href="#æ•°æ®é€‰å–" class="headerlink" title="æ•°æ®é€‰å–"></a>æ•°æ®é€‰å–</h4><p>é€‰å–2015.1.1-2021.6.1çš„æ²ªæ·± 300 æŒ‡æ•°ï¼Œå…¶ä¸­2015.1.1-2020.6.1çš„æ•°æ®ç”¨æ¥è®­ç»ƒæ¨¡å‹å„å‚æ•°ï¼Œ2020.6.1-2021.4.1çš„æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œå³ç”¨æ¥å›æµ‹æ¨¡å‹çš„æ•ˆæœã€‚</p><p>åŒæ—¶ï¼Œä¸ºäº†å»é™¤æ•°æ®çš„é‡çº²ä¸åŒå¸¦æ¥çš„å½±å“ï¼Œå¯¹æ•°æ®è¿›è¡ŒZ-scoreæ ‡å‡†åŒ–ã€‚</p><h4 id="ç‰¹å¾æŒ‡æ ‡è¯´æ˜"><a href="#ç‰¹å¾æŒ‡æ ‡è¯´æ˜" class="headerlink" title="ç‰¹å¾æŒ‡æ ‡è¯´æ˜"></a>ç‰¹å¾æŒ‡æ ‡è¯´æ˜</h4><p>åœ¨é¢„æµ‹é—®é¢˜ä¸­ï¼Œ ç‰¹å¾æŒ‡æ ‡è¡¨ç¤ºä¸ºä¸€ä¸ªç»´æ•°ä¸º n çš„å‘é‡ï¼Œæ¯”è¾ƒæˆç†Ÿã€è¢«è¯æ˜æœ‰æ•ˆçš„ç‰¹å¾æŒ‡æ ‡å¦‚ä¸‹ï¼ˆä¸å‰æ–‡ä¸€è‡´ï¼‰ï¼š</p><p>X1â€”â€”æ”¶ç›˜æŒ‡æ•° </p><p>X2â€”â€”å½“æ—¥æœ€å¤§æŒ‡æ•° </p><p>X3â€”â€”å½“æ—¥æœ€å°æŒ‡æ•° </p><p>X4â€”â€”æ¶¨è·Œå¹… </p><p>X5â€”â€”æˆäº¤é‡ </p><p>X6â€”â€”å‰ 30 æ—¥å¹³å‡æ¶¨è·Œå¹… </p><p>X7â€”â€”å‰ 30 æ—¥æœ€å¤§æ—¥æ³¢åŠ¨</p><h4 id="å‚æ•°å¯»ä¼˜-1"><a href="#å‚æ•°å¯»ä¼˜-1" class="headerlink" title="å‚æ•°å¯»ä¼˜"></a>å‚æ•°å¯»ä¼˜</h4><p>åœ¨æœªè°ƒå‚ä¹‹å‰ï¼Œæ ·æœ¬å†…é¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š0.93ã€‚</p><p>é€šè¿‡ä¼˜çŸ¿å¯¹ C å€¼ã€g å€¼è¿›è¡Œè°ƒå‚ï¼Œè°ƒå‚ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303202233784.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303202234957.png" alt=""></p><p>é‡‡ç”¨åŸºäºäº¤å‰éªŒè¯çš„ç½‘æ ¼æœç´¢æ³•åœ¨å‚æ•°Cå’Œgçš„æœ€ä½³å–å€¼èŒƒå›´å†…å¯»æ‰¾æœ€ä¼˜è§£ï¼Œé€šè¿‡ä¼˜çŸ¿è®¡ç®—å‡ºå‚æ•°Cçš„æœ€ä¼˜å€¼ä¸º5ï¼Œgçš„æœ€ä¼˜å€¼ä¸º0.08ã€‚</p><p>åœ¨æœ€ä¼˜è§£çš„åŸºç¡€ä¸Šå†æ¬¡è®¡ç®—ä¸€æ¬¡å‡†ç¡®ç‡ï¼Œå‚æ•°æœ€ä¼˜åŒ–ä¹‹åçš„æ¨¡å‹å‡†ç¡®ç‡æé«˜åˆ°0.98ã€‚</p><h4 id="å›æµ‹"><a href="#å›æµ‹" class="headerlink" title="å›æµ‹"></a>å›æµ‹</h4><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303202236547.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> é‡åŒ–æŠ•èµ„ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Quantitative investment </tag>
            
            <tag> Datayes! </tag>
            
            <tag> SVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 1ï¼šç¯å¢ƒé…ç½®</title>
      <link href="/2023/03/20/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%EF%BC%88Pytorch%EF%BC%891%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/03/20/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%EF%BC%88Pytorch%EF%BC%891%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>äººå·¥æ™ºèƒ½ï¼šä¸€å¥—ç”¨æ¥å­¦ä¹ è§„åˆ™/æ˜ å°„å…³ç³»çš„å›ºå®šç®—æ³•/æ–¹æ³•ã€‚</p><p>æ·±åº¦å­¦ä¹ ï¼šæœºå™¨å­¦ä¹ çš„åˆ†æ”¯ï¼Œæ˜¯ä¸€ç§ä»¥äººå·¥ç¥ç»ç½‘ç»œä¸ºæ¶æ„ï¼Œå¯¹èµ„æ–™è¿›è¡Œè¡¨å¾å­¦ä¹ çš„ç®—æ³•ã€‚</p><h3 id="æ·±åº¦å­¦ä¹ ç»†åˆ†é¢†åŸŸ"><a href="#æ·±åº¦å­¦ä¹ ç»†åˆ†é¢†åŸŸ" class="headerlink" title="æ·±åº¦å­¦ä¹ ç»†åˆ†é¢†åŸŸ"></a>æ·±åº¦å­¦ä¹ ç»†åˆ†é¢†åŸŸ</h3><ul><li>è®¡ç®—æœºè§†è§‰CV</li><li>è‡ªç„¶è¯­è¨€å¤„ç†NLP</li><li>è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ASR</li><li>äººå·¥æ™ºèƒ½ä¸ç‰©è”ç½‘AIoT</li><li>æ—¶é—´åºåˆ—åˆ†æ&amp;å¼‚å¸¸æ£€æµ‹AIOps</li><li>æœºå™¨äººæ§åˆ¶</li><li>æ¨èç³»ç»Ÿ</li><li>AI for Science</li><li>å¼ºåŒ–å­¦ä¹ RL</li><li>AI+</li></ul><h3 id="è§£å†³æ¬ æ‹Ÿåˆï¼ˆå‡å°‘åå·®ï¼‰çš„æ–¹æ³•"><a href="#è§£å†³æ¬ æ‹Ÿåˆï¼ˆå‡å°‘åå·®ï¼‰çš„æ–¹æ³•" class="headerlink" title="è§£å†³æ¬ æ‹Ÿåˆï¼ˆå‡å°‘åå·®ï¼‰çš„æ–¹æ³•"></a>è§£å†³æ¬ æ‹Ÿåˆï¼ˆå‡å°‘åå·®ï¼‰çš„æ–¹æ³•</h3><ul><li><p>å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œä¾‹å¦‚å¢åŠ å±‚æ•°ã€æ¯å±‚æœ‰æ›´å¤šçš„filtersã€‚</p></li><li><p>å‡å°‘æ­£åˆ™åŒ–ï¼Œä¾‹å¦‚dropoutæˆ–L1ã€L2æ­£åˆ™åŒ–ã€‚</p></li><li><p>é”™è¯¯åˆ†æï¼Œå³äº†è§£å‡ºé—®é¢˜çš„æ ¹å› ã€‚</p></li><li><p>é€‰æ‹©ä¸åŒçš„ï¼ˆæœ€å…ˆè¿›çš„ï¼‰æ¨¡å‹ç»“æ„ï¼Œä¾‹å¦‚ä»VGG16è½¬ä¸ºResnetã€‚</p></li><li><p>è°ƒæ•´è¶…å‚æ•°ï¼Œä¾‹å¦‚å­¦ä¹ ç‡ã€‚</p></li></ul><h3 id="è§£å†³è¿‡æ‹Ÿåˆï¼ˆå‡å°‘æ–¹å·®ï¼‰çš„æ–¹æ³•"><a href="#è§£å†³è¿‡æ‹Ÿåˆï¼ˆå‡å°‘æ–¹å·®ï¼‰çš„æ–¹æ³•" class="headerlink" title="è§£å†³è¿‡æ‹Ÿåˆï¼ˆå‡å°‘æ–¹å·®ï¼‰çš„æ–¹æ³•"></a>è§£å†³è¿‡æ‹Ÿåˆï¼ˆå‡å°‘æ–¹å·®ï¼‰çš„æ–¹æ³•</h3><ul><li><p>æ·»åŠ æ›´å¤šçš„è®­ç»ƒæ•°æ®</p></li><li><p>æ·»åŠ è§„èŒƒåŒ–ï¼Œå¦‚Batch Normã€Layer Norm</p></li><li><p>ä½¿ç”¨æ•°æ®å¢å¼º</p></li><li><p>ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œå¦‚dropoutã€L2æ­£åˆ™</p></li><li><p>é”™è¯¯åˆ†æ</p></li><li><p>é€‰æ‹©ä¸åŒçš„ï¼ˆæœ€å…ˆè¿›çš„ï¼‰æ¨¡å‹æ¶æ„</p></li><li><p>è°ƒæ•´è¶…å‚æ•°ï¼Œå¦‚å­¦ä¹ ç‡</p></li><li><p>Early stop</p></li><li><p>åˆ é™¤éƒ¨åˆ†ç‰¹å¾</p></li><li><p>å‡å°‘æ¨¡å‹è§„æ¨¡</p></li></ul><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>æ•™ç¨‹å‚è€ƒï¼š<a href="https://learning.datawhale.club/live_pc/l_6406e1a9e4b07b05583a25f1">Datawhaleç¯å¢ƒé…ç½®æ¼”ç¤º</a></p><p>ä¸ªäººï¼š</p><ul><li>è¿›å…¥ï¼Œconda activate d2l</li><li>æ‰“å¼€ï¼Œjupyter notebook</li><li>åœæ­¢ï¼Œctrl+c</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 2ï¼šæ•°æ®æ“ä½œ</title>
      <link href="/2023/03/20/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%EF%BC%88Pytorch%EF%BC%892%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/"/>
      <url>/2023/03/20/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%EF%BC%88Pytorch%EF%BC%892%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Nç»´æ•°ç»„"><a href="#Nç»´æ•°ç»„" class="headerlink" title="Nç»´æ•°ç»„"></a>Nç»´æ•°ç»„</h3><p>æœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œçš„ä¸»è¦æ•°æ®ç»“æ„ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303201417660.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303201418953.png" alt=""></p><h3 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h3><p>å½¢çŠ¶ï¼šä¾‹å¦‚3*4çŸ©é˜µã€‚</p><p>æ¯ä¸ªå…ƒç´ çš„æ•°æ®ç±»å‹ï¼šä¾‹å¦‚32ä½æµ®ç‚¹æ•°ã€‚</p><p>æ¯ä¸ªå…ƒç´ çš„å€¼ï¼šä¾‹å¦‚å…¨æ˜¯0ï¼Œæˆ–è€…éšæœºæ•°ã€‚</p><h3 id="è®¿é—®å…ƒç´ "><a href="#è®¿é—®å…ƒç´ " class="headerlink" title="è®¿é—®å…ƒç´ "></a>è®¿é—®å…ƒç´ </h3><p>è¡Œæ•°å’Œåˆ—æ•°å‡ä»0å¼€å§‹ã€‚</p><p>è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼š[1,2]</p><p>è®¿é—®ä¸€è¡Œï¼š[1,:]</p><p>è®¿é—®ä¸€åˆ—ï¼š[:,1]</p><p>è®¿é—®å­åŒºåŸŸï¼šå·¦å¼€å³é—­ï¼›éš”3è¡Œä¸€è·³</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303201424606.png" alt=""></p><h3 id="å…·ä½“æ“ä½œ"><a href="#å…·ä½“æ“ä½œ" class="headerlink" title="å…·ä½“æ“ä½œ"></a>å…·ä½“æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure><h4 id="å¼ é‡tensor"><a href="#å¼ é‡tensor" class="headerlink" title="å¼ é‡tensor"></a>å¼ é‡tensor</h4><p>è¡¨ç¤ºä¸€ä¸ªæ•°å€¼ç»„æˆçš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„å¯èƒ½æœ‰å¤šä¸ªç»´åº¦</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.arange(<span class="number">12</span>)</span><br><span class="line">x</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¼ é‡çš„shapeå±æ€§è®¿é—®å¼ é‡çš„å½¢çŠ¶å’Œå¼ é‡ä¸­å…ƒç´ çš„æ€»æ•°</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x.shape</span><br><span class="line">x.numel()  <span class="comment">#number elements</span></span><br></pre></td></tr></table></figure><p>è°ƒç”¨reshapeå‡½æ•°ï¼Œæ”¹å˜ä¸€ä¸ªå¼ é‡çš„å½¢çŠ¶è€Œä¸æ”¹å˜å…ƒç´ æ•°é‡å’Œå…ƒç´ å€¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = x.reshape(<span class="number">3</span>,<span class="number">4</span>)  <span class="comment">#3è¡Œ4åˆ—</span></span><br><span class="line">x</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å…¨0ã€å…¨1ã€å…¶ä»–å¸¸é‡æˆ–è€…ä»ç‰¹å®šåˆ†å¸ƒä¸­éšæœºé‡‡æ ·çš„æ•°å­—</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.zeros((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">torch.ones((<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><p>é€šè¿‡æä¾›åŒ…å«æ•°å€¼çš„Pythonåˆ—è¡¨ï¼ˆæˆ–åµŒå¥—åˆ—è¡¨ï¼‰æ¥ä¸ºæ‰€éœ€å¼ é‡ä¸­çš„æ¯ä¸ªå…ƒç´ èµ‹äºˆç¡®å®šå€¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.tensor([[<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]])</span><br></pre></td></tr></table></figure><p>å¸¸è§çš„æ ‡å‡†ç®—æœ¯è¿ç®—ç¬¦ï¼ˆ+ã€-ã€<em>ã€/å’Œ*</em>ï¼‰éƒ½å¯ä»¥è¢«å‡çº§ä¸ºæŒ‰å…ƒç´ è¿ç®—</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.tensor([<span class="number">1.0</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>])</span><br><span class="line">y = torch.tensor([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line">x+y,x-y,x*y,x/y,x**y  <span class="comment">#**æ˜¯æ±‚å¹‚</span></span><br></pre></td></tr></table></figure><p>æŒ‡æ•°è¿ç®—ç­‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.exp(x)</span><br></pre></td></tr></table></figure><p>æŠŠå¤šä¸ªå¼ é‡è¿ç»“åœ¨ä¸€èµ·</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X = torch.arange(<span class="number">12</span>,dtype=torch.float32).reshape((<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">Y = torch.tensor([[<span class="number">2.0</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]])</span><br><span class="line">torch.cat((X,Y),dim=<span class="number">0</span>),torch.cat((X,Y),dim=<span class="number">1</span>)  <span class="comment">#dim=0åœ¨è¡Œä¸Šé¢æŠŠXå’ŒYåˆå¹¶èµ·æ¥ï¼Œdim=1åœ¨åˆ—ä¸Šé¢åˆå¹¶</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡é€»è¾‘è¿ç®—ç¬¦æ„å»ºäºŒå…ƒå¼ é‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X == Y  <span class="comment">#False/True</span></span><br></pre></td></tr></table></figure><p>å¯¹å¼ é‡ä¸­æ‰€æœ‰å…ƒç´ è¿›è¡Œæ±‚å’Œä¼šäº§ç”Ÿä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„å¼ é‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><p>å³ä½¿å½¢çŠ¶ä¸åŒï¼Œä»ç„¶å¯ä»¥è°ƒç”¨<strong>å¹¿æ’­æœºåˆ¶broadcasting mechanism</strong>æ¥æ‰§è¡ŒæŒ‰å…ƒç´ æ“ä½œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.arange(<span class="number">3</span>).reshape((<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line">b = torch.arange(<span class="number">2</span>).reshape((<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">a + b  <span class="comment">#æ‰©å±•æ•°ç»„,aå¤åˆ¶ä¸º3*2ï¼Œbå¤åˆ¶ä¸º3*2ï¼Œå†ç›¸åŠ </span></span><br></pre></td></tr></table></figure><p>ç”¨[-1]é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç”¨[1:3]é€‰æ‹©ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå…ƒç´ </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X[-<span class="number">1</span>], X[<span class="number">1</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>é™¤è¯»å–å¤–ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•å°†å…ƒç´ å†™å…¥çŸ©é˜µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X[<span class="number">1</span>,<span class="number">2</span>] = <span class="number">9</span></span><br><span class="line">X</span><br></pre></td></tr></table></figure><p>ä¸ºå¤šä¸ªå…ƒç´ èµ‹ç›¸åŒçš„å€¼ï¼Œåªéœ€è¦ç´¢å¼•æ‰€æœ‰å…ƒç´ ï¼Œç„¶åä¸ºå®ƒä»¬èµ‹å€¼</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X[<span class="number">0</span>:<span class="number">2</span>,:] = <span class="number">12</span></span><br><span class="line">X</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Deep Learning </tag>
            
            <tag> Study notes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šå› å­ç­–ç•¥</title>
      <link href="/2023/03/20/%E5%A4%9A%E5%9B%A0%E5%AD%90%E7%AD%96%E7%95%A5/"/>
      <url>/2023/03/20/%E5%A4%9A%E5%9B%A0%E5%AD%90%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å†…å®¹åŸºäº<a href="https://www.joinquant.com/">èšå®½å¹³å°</a>å®ç°ï¼Œä¸ºåœ¨æ ¡è¯¾ç¨‹ä½œä¸šï¼Œä»æœ‰è¾ƒå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><h3 id="ç ”ç©¶ç›®çš„"><a href="#ç ”ç©¶ç›®çš„" class="headerlink" title="ç ”ç©¶ç›®çš„"></a>ç ”ç©¶ç›®çš„</h3><p>æœ¬æ–‡å¯¹å› å­ç»„åˆè¿›è¡Œç¡®å®šï¼Œç”¨è¾ƒå°‘çš„å…±åŒå› å­æ¥ä»£æ›¿è‚¡ç¥¨çš„å„ç§ç‰¹å¾ã€‚</p><p>ä¸ºäº†é™ä½æ„å»ºå› å­ç»„åˆçš„éš¾åº¦ï¼Œæœ¬æ–‡ä»åŸºå‡†çš„ç‰¹å¾å‡ºå‘ç¡®å®šå› å­ã€‚ä»è‚¡ç¥¨ç»„åˆç®¡ç†çš„è§’åº¦æ¥çœ‹ï¼Œå› å­æœ€å¤§çš„ä½œç”¨åœ¨äºé£é™©æè¿°ç»§è€Œå¯¹å†²ï¼Œä»è€Œè·å¾—Alphaæ”¶ç›Šï¼Œæ‰€ä»¥åŸºå‡†æ˜æ˜¾çš„ç‰¹å¾åº”è¯¥æ˜¯é£é™©ã€‚</p><h3 id="ç ”ç©¶å†…å®¹"><a href="#ç ”ç©¶å†…å®¹" class="headerlink" title="ç ”ç©¶å†…å®¹"></a>ç ”ç©¶å†…å®¹</h3><ul><li><p>ä»åŸºå‡†çš„è§’åº¦è·å–è¾ƒä¸ºé€šç”¨çš„å› å­</p><p>æœ¬æ–‡çš„åŸºç¡€åŸºå‡†è®¾å®šä¸ºä¸Šè¯50ã€æ²ªæ·±300å’Œä¸­è¯500ï¼Œè€ƒè™‘åˆ°è¿™ä¸‰ä¸ªåŸºå‡†çš„ç¼–åˆ¶æ–¹å¼ä»¥åŠä¸ªè‚¡çš„é€šç”¨æ€§è´¨ï¼Œå¯¹ä»¥ä¸‹ä¸ƒä¸ªå› å­è¿›è¡Œç ”ç©¶ï¼šå¸‚å€¼ã€è‚¡æœ¬ã€ROEã€å‡€åˆ©æ¶¦å¢é•¿ç‡ã€PEã€æ¢æ‰‹ç‡ä»¥åŠEPSã€‚</p></li><li><p>æ ¹æ®å› å­åœ¨æŒ‡æ•°æˆåˆ†è‚¡ä¸­çš„æš´éœ²åˆ†æ</p><p>ä»åŸºå‡†çš„è§’åº¦çœ‹ï¼Œå› å­æ˜¯å¦é€šç”¨ï¼Œæ˜¯å¦èƒ½ä»£è¡¨åŸºå‡†æ˜æ˜¾çš„ç‰¹å¾ã€‚</p></li><li><p>åˆ†æå› å­ä¹‹é—´çš„ç›¸å…³æ€§</p><p>é¿å…ç›¸å…³æ€§è¿‡é«˜çš„å› å­è¿›å…¥å› å­ç»„åˆï¼Œç›¸å…³æ€§è¿‡é«˜çš„å› å­å¯¹äºçº¿æ€§æ¨¡å‹è€Œè¨€ï¼Œå¾€å¾€å¯¼è‡´æ¨¡å‹å‡ºç°è¾ƒå¤§è¯¯å·®ï¼Œä½¿å¾—æ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›ä¸‹é™ã€‚</p></li><li><p>ç ”ç©¶å› å­IC</p><p>åˆ†æå› å­è§£é‡ŠåŠ›åº¦æ˜¯å¦è¾ƒå¼ºï¼Œåˆ¤æ–­å› å­å¯¹ä¸ªè‚¡æœªæ¥æ”¶ç›Šçš„é¢„æµ‹èƒ½åŠ›ã€‚</p></li><li><p>æ„å»ºå¤šå› å­ç»„åˆå¹¶è¿›è¡Œæ¨¡å‹æ£€éªŒã€‚</p></li></ul><h3 id="æ•°æ®è·å–"><a href="#æ•°æ®è·å–" class="headerlink" title="æ•°æ®è·å–"></a>æ•°æ®è·å–</h3><h4 id="æ—¥æœŸåˆ—è¡¨è·å–"><a href="#æ—¥æœŸåˆ—è¡¨è·å–" class="headerlink" title="æ—¥æœŸåˆ—è¡¨è·å–"></a>æ—¥æœŸåˆ—è¡¨è·å–</h4><p>ç”±äºç ”ç©¶ç¯å¢ƒå†…å­˜é™åˆ¶ï¼Œå…¨å¸‚åœºæ—¥é¢‘æ•°æ®é‡è¾ƒå¤šï¼Œæ— æ³•åœ¨èšå®½å¹³å°è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æœ¬æ–‡è€ƒè™‘ä»¥å‘¨ä¸ºé¢‘ç‡å¯¹ä¸åŒé£æ ¼å› å­è¿›è¡Œåˆ†æã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_period_date</span>(<span class="params">period, start_date, end_date</span>):</span><br><span class="line">    stock_data = get_price(<span class="string">&#x27;000001.XSHE&#x27;</span>, start_date, end_date, <span class="string">&#x27;daily&#x27;</span>, fields=[<span class="string">&#x27;close&#x27;</span>])</span><br><span class="line">    stock_data[<span class="string">&#x27;date&#x27;</span>] = stock_data.index</span><br><span class="line">    period_stock_data = stock_data.resample(period, how=<span class="string">&#x27;last&#x27;</span>)</span><br><span class="line">    date = period_stock_data.index</span><br><span class="line">    pydate_array = date.to_pydatetime()</span><br><span class="line">    date_only_array = np.vectorize(<span class="keyword">lambda</span> s: s.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>))(pydate_array)</span><br><span class="line">    date_only_series = pd.Series(date_only_array)</span><br><span class="line">    start date = datetime.datetime.strptime(start_date, <span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    start_date = start_date-datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line">    start_date = start_date.strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    date_list = date_only_series.values.tolist()</span><br><span class="line">    date_list.insert(<span class="number">0</span>,start_date)</span><br><span class="line">    TradeDate = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> date_list:</span><br><span class="line">        temp = <span class="built_in">list</span>(get_trade_days(end_date=i, count==<span class="number">1</span>))[<span class="number">0</span>]</span><br><span class="line">        TradeDate.append(<span class="built_in">str</span>(temp))</span><br><span class="line">    <span class="keyword">return</span> TradeDate</span><br><span class="line">np.array(get_period_date(<span class="string">&#x27;w&#x27;</span>,<span class="string">&#x27;2013-01-01&#x27;</span>,<span class="string">&#x27;2018-01-01&#x27;</span>))</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®è·å–-1"><a href="#æ•°æ®è·å–-1" class="headerlink" title="æ•°æ®è·å–"></a>æ•°æ®è·å–</h4><p>é€šè¿‡å¯¹åŸºå‡†ç¼–åˆ¶è§„åˆ™è¿›è¡Œè§£è¯»ï¼Œä»ç›´è§‚ä¸Šå¯¹åŸºå‡†çš„ç‰¹å¾æœ‰æ‰€äº†è§£ï¼Œç„¶åå½¢æˆé€»è¾‘ä¸”å…·æœ‰ç»æµæ„ä¹‰çš„åˆæ­¥å› å­ç»„åˆåˆ—è¡¨ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">æŒ‡æ•°åç§°</th><th style="text-align:center">è‚¡ç¥¨æ± </th><th style="text-align:center">è‚¡ç¥¨ä¸ªæ•°</th><th style="text-align:center">åŠ æƒæ–¹æ³•</th><th style="text-align:center">é€‰è‚¡æ¡ä»¶</th><th style="text-align:center">å¯¹åº”å› å­</th></tr></thead><tbody><tr><td style="text-align:center">ä¸Šè¯50</td><td style="text-align:center">ä¸Šè¯180</td><td style="text-align:center">20</td><td style="text-align:center">æ´¾è®¸åŠ æƒ+è°ƒæ•´è‚¡æœ¬</td><td style="text-align:center">è§„æ¨¡ã€æµåŠ¨æ€§</td><td style="text-align:center">æµé€šå¸‚å€¼ã€æˆäº¤é‡‘é¢</td></tr><tr><td style="text-align:center">æ²ªæ·±300</td><td style="text-align:center">å…¨Aè‚¡å¸‚å€¼æœ€å¤§çš„300åª</td><td style="text-align:center">300</td><td style="text-align:center">æ´¾è®¸åŠ æƒ+è°ƒæ•´è‚¡æœ¬</td><td style="text-align:center">è§„æ¨¡</td><td style="text-align:center">æ—¥å‡æ€»å¸‚å€¼</td></tr><tr><td style="text-align:center">ä¸­è¯500</td><td style="text-align:center">å…¨Aè‚¡æ‰£é™¤å¸‚å€¼æœ€å¤§çš„300åªåçš„å‰500åª</td><td style="text-align:center">500</td><td style="text-align:center">æ´¾è®¸åŠ æƒ+è°ƒæ•´è‚¡æœ¬</td><td style="text-align:center">è§„æ¨¡</td><td style="text-align:center">æ—¥å‡æ€»å¸‚å€¼</td></tr></tbody></table></div><p>ä»æŒ‡æ•°æ ·æœ¬è‚¡é€‰å–æ ‡å‡†ä¸Šçœ‹ï¼Œå¸‚å€¼æ˜¯é‡ç‚¹è€ƒè™‘çš„æ–¹é¢ã€‚</p><p>ä»åŠ æƒæ–¹å¼ä¸Šçœ‹è‚¡æœ¬éœ€è¦åŠ å…¥åˆæ­¥çš„å› å­åº“ã€‚</p><p>è€ƒè™‘åˆ°ä¸ªè‚¡çš„é€šç”¨æ€§è´¨ï¼Œåˆæ­¥åŠ å…¥äº†roeã€å‡€åˆ©æ¶¦å¢é•¿ç‡ï¼ˆæˆé•¿æ€§å› å­ï¼‰ã€PEï¼ˆä»·å€¼ï¼‰ã€æ¢æ‰‹ç‡ç­‰å› å­ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">å› å­åç§°</th><th style="text-align:center">è®¡ç®—æ–¹æ³•</th><th style="text-align:center">å› å­æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">å¸‚å€¼</td><td style="text-align:center">æ€»å¸‚å€¼=ä¸ªè‚¡å½“æ—¥è‚¡ä»·*å½“æ—¥æ€»è‚¡æœ¬</td><td style="text-align:center">è§„æ¨¡ç›¸å…³ï¼Œä¿¡æ¯åŒ…å«è‚¡æœ¬å’Œè‚¡ä»·</td></tr><tr><td style="text-align:center">è‚¡æœ¬</td><td style="text-align:center">æŠ¥è¡¨ç§‘ç›®</td><td style="text-align:center">è§„æ¨¡ç›¸å…³</td></tr><tr><td style="text-align:center">EPS</td><td style="text-align:center">å½“æœŸå‡€åˆ©æ¶¦/æ™®é€šè‚¡åŠ æƒå¹³å‡</td><td style="text-align:center">ä¸šç»©ç›¸å…³</td></tr><tr><td style="text-align:center">ROE</td><td style="text-align:center">å½’å±æ¯å…¬å¸çš„å‡€åˆ©æ¶¦å æ¯”<em>é”€å”®å‡€åˆ©ç‡</em>èµ„äº§å‘¨è½¬ç‡*æƒç›Šä¹˜æ•°</td><td style="text-align:center">ç›ˆåˆ©èƒ½åŠ›ç›¸å…³</td></tr><tr><td style="text-align:center">å‡€åˆ©æ¶¦å¢é•¿ç‡</td><td style="text-align:center">ï¼ˆæœ¬æœŸ-ä¸Šå¹´åŒæœŸè°ƒæ•´æ•°ï¼‰/ABSä¸Šå¹´åŒæœŸè°ƒæ•´æ•°*100%</td><td style="text-align:center">æˆé•¿èƒ½åŠ›ç›¸å…³</td></tr><tr><td style="text-align:center">PE</td><td style="text-align:center">å¸‚å€¼/å½“æœŸå‡€åˆ©æ¶¦</td><td style="text-align:center">ä¼°å€¼å› å­</td></tr><tr><td style="text-align:center">æ¢æ‰‹ç‡</td><td style="text-align:center">æˆäº¤é‡/æ€»è‚¡æ•°</td><td style="text-align:center">è¡Œæƒ…ç›¸å…³</td></tr></tbody></table></div><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">start = time.clock()</span><br><span class="line">begin_date = <span class="string">&#x27;2013-01-01&#x27;</span></span><br><span class="line">end_date = <span class="string">&#x27;2018-01-02&#x27;</span></span><br><span class="line">TradeDate = get_period_date(<span class="string">&#x27;w&#x27;</span>,begin_date,end_date)</span><br><span class="line">factorData = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> date <span class="keyword">in</span> TradeDate:</span><br><span class="line">    stockList = get_index_stocks(<span class="string">&#x27;00002.XSHG&#x27;</span>,date)+get_index_stocks(<span class="string">&#x27;39107.XSHE&#x27;</span>,date)</span><br><span class="line">    df_fund = get_fundamentals(query(valuation.code, valuation.turnover_ratio, valuation.pe_ratio, â€¦â€¦))</span><br><span class="line">    df_fund = df_fund.set_index([<span class="string">&#x27;code&#x27;</span>])</span><br><span class="line">    factorData[date] = df_fund</span><br><span class="line">elapsed = (time.clock() - start)</span><br><span class="line">pring(<span class="string">&quot;Time used:&quot;</span>,elapsed)</span><br></pre></td></tr></table></figure><h3 id="å› å­æš´éœ²åˆ†æ"><a href="#å› å­æš´éœ²åˆ†æ" class="headerlink" title="å› å­æš´éœ²åˆ†æ"></a>å› å­æš´éœ²åˆ†æ</h3><p>ä¸ºäº†åˆ¤æ–­ä¸Šè¯50ã€æ²ªæ·±300å’Œä¸­è¯500åœ¨å†å²ä¸Šå„å› å­çš„æš´éœ²æƒ…å†µï¼Œæˆ‘ä»¬ä»¥å‘¨ä¸ºé¢‘ç‡æµ‹ç®—å› å­ç›¸å¯¹äºå…¨å¸‚åœºçš„åç¦»ç¨‹åº¦ã€‚è€ƒè™‘å¯æ¯”æ€§å’Œç»Ÿä¸€æ ‡å°ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®ä¸ºå› å­å½“æ—¥çš„æ’åºã€‚è®¡ç®—æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å°†æ¯æ—¥å› å­æŒ‰ç…§ä»å¤§åˆ°å°æ’åºï¼›</li><li>ä»ä¸­å–å‡ºå±äºæŸä¸€æŒ‡æ•°çš„æˆåˆ†è‚¡ï¼Œè®¡ç®—å› å­çš„æ’åºå¹³å‡å€¼ï¼›</li><li>æš´éœ²åº¦=ï¼ˆæŒ‡æ•°å› å­æ’åºå¹³å‡å€¼-å½“æ—¥å…¨å¸‚åœºæ’åºä¸­é—´å€¼ï¼‰/å½“æ—¥è‚¡ç¥¨æ€»ä¸ªæ•°ã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">Fields = [<span class="string">&#x27;trunover_ratio&#x27;</span>,<span class="string">&#x27;pe_ratio&#x27;</span>,<span class="string">&#x27;market_cap&#x27;</span>,<span class="string">&#x27;capitalization&#x27;</span>,<span class="string">&#x27;eps&#x27;</span>,<span class="string">&#x27;roe&#x27;</span>,<span class="string">&#x27;inc_net_profit_year_on_year&#x27;</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getExplore</span>(<span class="params">index</span>):</span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;SH50&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;000016.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;HS300&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;000300.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;ZZ500&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;000905.XSHG&#x27;</span></span><br><span class="line">    explore = pd.DataFrame(index = TradeDate)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> Fields:</span><br><span class="line">        tempExplore = []</span><br><span class="line">        <span class="keyword">for</span> date <span class="keyword">in</span> TradeDate:</span><br><span class="line">            stockList = get_index_stocks(index,date)</span><br><span class="line">            temp = factorData[date][[i]]</span><br><span class="line">            temp = temp.sort([i],ascending = <span class="literal">False</span>)</span><br><span class="line">            temp[<span class="string">&#x27;rank&#x27;</span>] = <span class="built_in">range</span>(<span class="built_in">len</span>(temp)+<span class="number">1</span>,<span class="number">1</span>,-<span class="number">1</span>)</span><br><span class="line">            tempExplore.append((temp.loc[stockList,<span class="string">&#x27;rank&#x27;</span>].mean() - <span class="built_in">len</span>(temp)/<span class="number">2</span>)/<span class="built_in">len</span>(temp))</span><br><span class="line">        explore[i] = tempExplore</span><br><span class="line">    <span class="keyword">return</span> explore</span><br><span class="line">result_SH50 = []</span><br><span class="line">result_HS300 = []</span><br><span class="line">result_ZZ500 = []</span><br><span class="line">explore1 = getExplore(<span class="string">&#x27;SH50&#x27;</span>)</span><br><span class="line">explore2 = getExplore(<span class="string">&#x27;HS300&#x27;</span>)</span><br><span class="line">explore3 = getExplore(<span class="string">&#x27;ZZ500&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Fields:</span><br><span class="line">    result_SH50.append(explore1[i].mean())</span><br><span class="line">    result_HS300.append(explore2[i].mean())</span><br><span class="line">    result_ZZ500.append(explore3[i].mean())</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Year = [<span class="string">&#x27;2013&#x27;</span>,<span class="string">&#x27;2014&#x27;</span>,<span class="string">&#x27;2015&#x27;</span>,<span class="string">&#x27;2016&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>]</span><br><span class="line">Fields = [<span class="string">&#x27;trunover_ratio&#x27;</span>,<span class="string">&#x27;pe_ratio&#x27;</span>,<span class="string">&#x27;market_cap&#x27;</span>,<span class="string">&#x27;capitalization&#x27;</span>,<span class="string">&#x27;eps&#x27;</span>,<span class="string">&#x27;roe&#x27;</span>,<span class="string">&#x27;inc_net_profit_year_on_year&#x27;</span>]</span><br><span class="line">total1 = pd.DataFrame()</span><br><span class="line">total2 = pd.DataFrame()</span><br><span class="line">total3 = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Year)):</span><br><span class="line">    total1[Year[i]] = explore1.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total2[Year[i]] = explore2.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total3[Year[i]] = explore3.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">x = np.array(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)))</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fields:</span><br><span class="line">    plt.bar(x, total1.loc[i], <span class="number">0.3</span>, label = i)</span><br><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)),Year)</span><br><span class="line">ax.set_title(<span class="string">&quot;SH50&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211517531.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211517751.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211518834.png" alt=""></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">bar_width = <span class="number">0.3</span></span><br><span class="line">x = np.array(<span class="built_in">range</span>(<span class="built_in">len</span>(result_SH50)))</span><br><span class="line">plt.bar(x, result_SH50,bar_width,label=<span class="string">&#x27;SH50&#x27;</span>)</span><br><span class="line">plt.bar(x+bar_width, result_HS300,bar_width,label=<span class="string">&#x27;HS300&#x27;</span>)</span><br><span class="line">plt.bar(x+bar_width+bar_width, result_ZZ500,bar_width,label=<span class="string">&#x27;ZZ500&#x27;</span>)</span><br><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="built_in">len</span>(result_SH50)),Fields)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211521269.png" alt=""></p><p>æ¨ªåæ ‡ä¸ºå¹´åº¦ï¼Œé¢œè‰²ç‚¹ä»£è¡¨å½“å¹´çš„å› å­æš´éœ²æƒ…å†µã€‚</p><ul><li><p>å¸‚å€¼å’Œè‚¡æœ¬å› å­çš„åç¦»åº¦åœ¨æ¯ä¸€å¹´å‡æ˜¯æœ€é«˜çš„ã€‚ä¸Šè¯50å¸‚å€¼å’Œè‚¡æœ¬çš„åç¦»åº¦ç¨³å®š48%ï¼Œæ²ªæ·±300çš„åç¦»åº¦ç¨³å®šåœ¨42%ï¼Œè€Œä¸­è¯500çš„åç¦»åº¦ä»æœ€åˆçš„19%å·¦å³é€æ­¥æå‡è‡³24%ã€‚</p></li><li><p>ä¸­ç­‰åç¦»åº¦çš„å› å­åŒ…æ‹¬æ¢æ‰‹ç‡ã€PEã€EPSã€ROE å› å­ï¼Œè¿™äº›å› å­åœ¨ä¸Šè¯50çš„åç¦»åº¦åœ¨20%-30%å·¦å³ï¼Œåœ¨æ²ªæ·±300çš„åç¦»åº¦åœ¨15%-25%å·¦å³ï¼Œåœ¨ä¸­è¯500åªæœ‰10%ä»¥ä¸‹ã€‚</p></li><li><p>åç¦»åº¦æœ€å°çš„æ˜¯å‡€åˆ©æ¶¦å¢é•¿ç‡å› å­ï¼Œåœ¨ä¸‰å¤§æŒ‡æ•°ä¸­ï¼Œå‡€åˆ©æ¶¦å¢é•¿ç‡çš„åç¦»åº¦å‡ ä¹ä¸º0ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§å¸‚å€¼å’Œå°å¸‚å€¼ä¸ªè‚¡åœ¨æˆé•¿æ€§æ–¹é¢æ¥çœ‹ï¼Œå·®å¼‚ä¸å¤§ã€‚</p></li><li><p>å› å­æš´éœ²åº¦æƒ…å†µæ’åºä¸ºï¼šå¸‚å€¼&gt;è‚¡æœ¬&gt;æ¢æ‰‹ç‡&gt;è‚¡æœ¬&gt;PE&gt;ROE&gt;å‡€åˆ©æ¶¦å¢é•¿ç‡ã€‚å› ä¸ºä¸‰å¤§è‚¡æŒ‡åœ¨å‡€åˆ©æ¶¦å¢é•¿ç‡å› å­ä¸Šçš„æš´éœ²åº¦å‡ ä¹ä¸º0ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¯¥å› å­ç§»å‡ºé£é™©å› å­åº“ã€‚</p></li></ul><h3 id="å› å­ç›¸å…³æ€§åˆ†æ"><a href="#å› å­ç›¸å…³æ€§åˆ†æ" class="headerlink" title="å› å­ç›¸å…³æ€§åˆ†æ"></a>å› å­ç›¸å…³æ€§åˆ†æ</h3><p>é™¤äº†éœ€è¦è€ƒè™‘å› å­çš„æš´éœ²ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®¡ç®—å› å­ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å°†ç›¸å…³æ€§è¾ƒé«˜çš„å› å­åŒºåˆ†å¼€æ¥ï¼Œå¯ä»¥é™ä½å› å­å…±çº¿æ€§é£é™©å¹¶ä¸”å‡å°‘å› å­ä¸ªæ•°ã€‚</p><h4 id="ç›¸å…³æ€§å¹³å‡å€¼"><a href="#ç›¸å…³æ€§å¹³å‡å€¼" class="headerlink" title="ç›¸å…³æ€§å¹³å‡å€¼"></a>ç›¸å…³æ€§å¹³å‡å€¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">getCorr</span>(<span class="params">index</span>):</span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;SH50&#x27;</span>:</span><br><span class="line">        index == <span class="string">&#x27;00016.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;HS300&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;00300.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;ZZ500&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;00905.XSHG&#x27;</span></span><br><span class="line">    corr = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> date <span class="keyword">in</span> TradeDate:</span><br><span class="line">        stockList = get_index_stocks(index,date)</span><br><span class="line">        temp = factorData[date].loc[stockList,:]</span><br><span class="line">        corr[date] = temp.corr()</span><br><span class="line">    corr = pd.Panel.from_dict(corr)</span><br><span class="line">    <span class="keyword">return</span> corr</span><br><span class="line">corr_SH50 = getCorr(<span class="string">&#x27;SH50&#x27;</span>)</span><br><span class="line">corr_HS300 = getCorr(<span class="string">&#x27;HS300&#x27;</span>)</span><br><span class="line">corr_ZZ500 = getCorr(<span class="string">&#x27;ZZ500&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_SH50.mean(axis = <span class="number">0</span>), annot=<span class="literal">True</span>, vmax=<span class="number">1</span>, vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;SH50&quot;</span>,rontsize=<span class="number">21</span>)</span><br><span class="line">fig.show</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_HS300.mean(axis = <span class="number">0</span>), annot=<span class="literal">True</span>, vmax=<span class="number">1</span>, vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;HS300&quot;</span>,rontsize=<span class="number">21</span>)</span><br><span class="line">fig.show</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_ZZ500.mean(axis = <span class="number">0</span>), annot=<span class="literal">True</span>, vmax=<span class="number">1</span>, vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;ZZ500&quot;</span>,rontsize=<span class="number">21</span>)</span><br><span class="line">fig.show</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211532097.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211532645.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211532196.png" alt=""></p><p>ä»ä¸Šè¯50æ¥çœ‹ï¼Œç›¸å…³æ€§æœ€é«˜çš„å› å­ä¸ºè‚¡æœ¬å’Œå¸‚å€¼ï¼›</p><p>ä»æ²ªæ·±300æ¥çœ‹ï¼Œå’Œä¸Šè¯50ç›¸ä¼¼ï¼Œä½†æ¢æ‰‹ç‡å’Œå¸‚å€¼çš„ç›¸å…³æ€§é™ä½ï¼›</p><p>ä»ä¸­è¯500æ¥çœ‹ï¼Œå’Œå…¶ä»–ä¸¤ä¸ªæŒ‡æ•°ç›¸ä¼¼ï¼Œæ¢æ‰‹ç‡å’Œå¸‚å€¼çš„ç›¸å…³æ€§è¿›ä¸€æ­¥é™ä½ã€‚</p><h4 id="ç›¸å…³æ€§æ ‡å‡†å·®"><a href="#ç›¸å…³æ€§æ ‡å‡†å·®" class="headerlink" title="ç›¸å…³æ€§æ ‡å‡†å·®"></a>ç›¸å…³æ€§æ ‡å‡†å·®</h4><p>å„å› å­åœ¨ä¸‰å¤§è‚¡æŒ‡ä¸­çš„ç›¸å…³æ€§æ ‡å‡†å·®ï¼Œæ ‡å‡†å·®è¶Šå°ï¼Œç›¸å…³æ€§è¶Šç¨³å®šã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_SH50.std(axis=<span class="number">0</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;SH50&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_SH50.std(axis=<span class="number">0</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;HS300&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(corr_SH50.std(axis=<span class="number">0</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;ZZ500&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211559035.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211559313.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211559858.png" alt=""></p><p>ä»ä¸Šè¯50æ¥çœ‹ï¼Œæ³¢åŠ¨æ€§æœ€é«˜çš„ä¸ºå‡€åˆ©æ¶¦å¢é•¿ç‡å’ŒPEï¼Œå…¶æ¬¡æ˜¯å‡€åˆ©æ¶¦å¢é•¿ç‡å’ŒROEï¼›</p><p>ä»æ²ªæ·±300æ¥çœ‹ï¼Œå’Œä¸Šè¯50ç›¸ä¼¼ï¼Œä½†æ³¢åŠ¨æ€§é™ä½ï¼›</p><p>ä»ä¸­è¯500æ¥çœ‹ï¼Œå’Œå…¶ä»–ä¸¤ä¸ªæŒ‡æ•°ç›¸ä¼¼ï¼Œæ³¢åŠ¨æ€§è¿›ä¸€æ­¥é™ä½ã€‚</p><h4 id="ç›¸å…³å¼ºåº¦"><a href="#ç›¸å…³å¼ºåº¦" class="headerlink" title="ç›¸å…³å¼ºåº¦"></a>ç›¸å…³å¼ºåº¦</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap((corr_SH50.mean(axis=<span class="number">0</span>)/corr_SH50.std(axis=<span class="number">0</span>)).astype(<span class="built_in">int</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;SH50&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap((corr_HS300.mean(axis=<span class="number">0</span>)/corr_HS300.std(axis=<span class="number">0</span>)).astype(<span class="built_in">int</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap((corr_ZZ500.mean(axis=<span class="number">0</span>)/corr_ZZ500.std(axis=<span class="number">0</span>)).astype(<span class="built_in">int</span>),annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211603550.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211603776.png" alt=""></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211604601.png" alt=""></p><p>æ•´ä½“æ¥çœ‹ï¼Œç›¸å…³å¼ºåº¦è¾ƒé«˜çš„ç»„åˆæœ‰è‚¡æœ¬&amp;å¸‚å€¼ã€ROE&amp;å¸‚å€¼ã€EPS&amp;å¸‚å€¼ã€å‡€åˆ©æ¶¦å¢é•¿ç‡&amp;å¸‚å€¼ã€ROE&amp;EPSã€å‡€åˆ©æ¶¦å¢é•¿ç‡&amp;EPSã€å‡€åˆ©æ¶¦å¢é•¿ç‡å’ŒROEã€‚</p><p>æœ€ç»ˆå› å­ç»„åˆä¸­åº”é¿å…ä¸¤è€…çš„åŒæ—¶å‡ºç°ã€‚</p><h3 id="å› å­ICåˆ†æ"><a href="#å› å­ICåˆ†æ" class="headerlink" title="å› å­ICåˆ†æ"></a>å› å­ICåˆ†æ</h3><p>é™¤äº†è€ƒè™‘å› å­çš„ç›¸å…³æ€§ï¼Œå› å­çš„é€‰è‚¡èƒ½åŠ›æ˜¯æˆ‘ä»¬ç¬¬ä¸‰ä¸ªè¯„åˆ¤æ ‡å‡†ã€‚</p><p>é€šè¿‡å› å­çš„å‘¨ICå€¼é€‰æ‹©è§£é‡ŠåŠ›åº¦è¾ƒé«˜çš„å› å­ï¼š</p><ul><li>é€‰å‡ºè‚¡ç¥¨æ± </li><li>å› å­æŒ‰ç…§ä»å¤§åˆ°å°æ’åº</li><li>åä¸€æ—¥æ”¶ç›Šç‡æŒ‰ç…§ä»å¤§åˆ°å°æ’åº</li><li>è®¡ç®—ä¸¤ä¸ªæ’åºä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå³RankIC</li></ul><h4 id="ICå‡å€¼åˆ†æ"><a href="#ICå‡å€¼åˆ†æ" class="headerlink" title="ICå‡å€¼åˆ†æ"></a>ICå‡å€¼åˆ†æ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">factor_IC_analysis</span>(<span class="params">factorData,index</span>):</span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;SH50&#x27;</span>:</span><br><span class="line">        index == <span class="string">&#x27;00016.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;HS300&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;00300.XSHG&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="string">&#x27;ZZ500&#x27;</span>:</span><br><span class="line">        index = <span class="string">&#x27;00905.XSHG&#x27;</span></span><br><span class="line">    IC = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> date <span class="keyword">in</span> TradeDate[:-<span class="number">1</span>]:</span><br><span class="line">        <span class="keyword">if</span> index:</span><br><span class="line">            stockList = get_index_stocks(index,date)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stockList = <span class="built_in">list</span>(factorData[date].index)</span><br><span class="line">        df_close = get_price(stockList,date,TradeDate[TradeDate.index(date)+<span class="number">1</span>],<span class="string">&#x27;daily&#x27;</span>,[<span class="string">&#x27;close&#x27;</span>])</span><br><span class="line">        <span class="keyword">if</span> df_close.empty:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        df_pchg = df_close[<span class="string">&#x27;close&#x27;</span>].iloc[-<span class="number">1</span>,:]/df_close[<span class="string">&#x27;close&#x27;</span>].iloc[<span class="number">0</span>,:]-<span class="number">1</span></span><br><span class="line">        R_T = pd.DataFrame()</span><br><span class="line">        R_T[<span class="string">&#x27;pchg&#x27;</span>] = df_pchg</span><br><span class="line">        IC_Field = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Fields:</span><br><span class="line">            factor_data = factorData[date].loc[stockList, i]</span><br><span class="line">            R_T[<span class="string">&#x27;factor&#x27;</span>] = factor_data</span><br><span class="line">            R_T = R_T.dropna()</span><br><span class="line">            IC_Field.append(st.pearsonr(R_T.pchg.rank(),R_T[<span class="string">&#x27;factor&#x27;</span>].rank())[<span class="number">0</span>])</span><br><span class="line">        IC.append(IC_Field)</span><br><span class="line">    result = pd.DataFrame(index = TradeDate[:-<span class="number">1</span>],columns = Fields, data = IC)</span><br><span class="line">    result = result.dropna(how = <span class="string">&#x27;all&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">IC_SH50 = factor_IC_analysis(factorData, <span class="string">&#x27;SH50&#x27;</span>)</span><br><span class="line">IC_HS300 = factor_IC_analysis(factorData, <span class="string">&#x27;HS300&#x27;</span>)        </span><br><span class="line">IC_ZZ500 = factor_IC_analysis(factorData, <span class="string">&#x27;ZZ500&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">temp = pd.DataFrame()</span><br><span class="line">temp[<span class="string">&#x27;A&#x27;</span>] = IC_A.mean()</span><br><span class="line">temp[<span class="string">&#x27;SH50&#x27;</span>] = IC_SH50.mean()</span><br><span class="line">temp[<span class="string">&#x27;HS300&#x27;</span>] = IC_HS300.mean()</span><br><span class="line">temp[<span class="string">&#x27;ZZ500&#x27;</span>] = IC_ZZ500.mean()</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(temp,annot=<span class="literal">True</span>,vmax=<span class="number">1</span>,vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;IC Mean&quot;</span>, fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211618970.png" alt=""></p><p>å…¨å¸‚åœºå’Œä¸‰å¤§è‚¡æŒ‡ä¸­å„å› å­ICçš„å‘¨å¹³å‡å€¼å‡åœ¨$\plusmn$1%ä»¥ä¸Šï¼Œè¯´æ˜å› å­çš„è§£é‡ŠåŠ›åº¦éƒ½ä¸é”™ã€‚</p><p>å…¶ä¸­ï¼Œæ¢æ‰‹ç‡çš„é€‰è‚¡èƒ½åŠ›æœ€å¼ºï¼Œå…¶æ¬¡ä¸ºå¸‚å€¼å› å­ï¼Œè€ŒROEå› å­æ•ˆæœåœ¨æ‰€æœ‰å› å­ä¸­æœ€å·®ã€‚</p><p>ä¸ºäº†è¿›ä¸€æ­¥åˆ†æå› å­çš„é€‰è‚¡èƒ½åŠ›ï¼Œæ¥ä¸‹æ¥è¿›è¡ŒICçš„æ³¢åŠ¨æ€§åˆ†æã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Year = [<span class="string">&#x27;2013&#x27;</span>,<span class="string">&#x27;2014&#x27;</span>,<span class="string">&#x27;2015&#x27;</span>,<span class="string">&#x27;2016&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>]</span><br><span class="line">Fields = [<span class="string">&#x27;trunover_ratio&#x27;</span>,<span class="string">&#x27;pe_ratio&#x27;</span>,<span class="string">&#x27;market_cap&#x27;</span>,<span class="string">&#x27;capitalization&#x27;</span>,<span class="string">&#x27;eps&#x27;</span>,<span class="string">&#x27;roe&#x27;</span>,<span class="string">&#x27;inc_net_profit_year_on_year&#x27;</span>]</span><br><span class="line">total1 = pd.DataFrame()</span><br><span class="line">total2 = pd.DataFrame()</span><br><span class="line">total3 = pd.DataFrame()</span><br><span class="line">total4 = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Year)):</span><br><span class="line">    total1[Year[i]] = IC_A.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total2[Year[i]] = IC_SH50.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total3[Year[i]] = IC_HS300.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total3[Year[i]] = IC_ZZ500.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">x = np.array(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)))</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Fields:</span><br><span class="line">    plt.bar(x, total1.loc[i], <span class="number">0.3</span>, label = i)</span><br><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)),Year)</span><br><span class="line">ax.set_title(<span class="string">&quot;A&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211625458.png" alt=""></p><p><img src="C:/Users/yumiaomiao/Desktop/2.png" alt=""></p><p><img src="C:/Users/yumiaomiao/Desktop/3.png" alt="3"></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211625730.png" alt="4"></p><p>å„ä¸ªå› å­åœ¨ä¸Šè¯50ä¸­çš„æ³¢åŠ¨æ€§æœ€å¤§ï¼ŒHS300å…¶æ¬¡ï¼Œæ¥ç€æ˜¯ZZ500ä¸å…¨å¸‚åœºã€‚</p><p>æ¢æ‰‹ç‡å› å­åœ¨å„ä¸ªæŒ‡æ•°æˆåˆ†è‚¡ä¸­çš„æ³¢åŠ¨æ€§æœ€å¤§ï¼Œå‡€åˆ©æ¶¦å¢é•¿ç‡å› å­åœ¨å„ä¸ªæŒ‡æ•°æˆåˆ†è‚¡ä¸­æ³¢åŠ¨æ€§æœ€å°ã€‚</p><h4 id="ICç»å¯¹å€¼å‡å€¼åˆ†æ"><a href="#ICç»å¯¹å€¼å‡å€¼åˆ†æ" class="headerlink" title="ICç»å¯¹å€¼å‡å€¼åˆ†æ"></a>ICç»å¯¹å€¼å‡å€¼åˆ†æ</h4><p>ä¸ºäº†è€ƒå¯Ÿç»å¯¹é€‰è‚¡èƒ½åŠ›ï¼Œè®¡ç®—å„å› å­ICçš„ç»å¯¹å€¼çš„å¹³å‡å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">IC_A = <span class="built_in">abs</span>(IC_A)</span><br><span class="line">IC_SH50 = <span class="built_in">abs</span>(IC_SH50)</span><br><span class="line">IC_HS300 = <span class="built_in">abs</span>(IC_HS300)</span><br><span class="line">IC_ZZ500 = <span class="built_in">abs</span>(IC_ZZ500)</span><br><span class="line">temp = pd.DataFrame()</span><br><span class="line">temp[<span class="string">&#x27;A&#x27;</span>] = IC_A.mean()</span><br><span class="line">temp[<span class="string">&#x27;SH50&#x27;</span>] = IC_SH50.mean()</span><br><span class="line">temp[<span class="string">&#x27;HS300&#x27;</span>] = IC_HS300.mean()</span><br><span class="line">temp[<span class="string">&#x27;ZZ500&#x27;</span>] = IC_ZZ500.mean()</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">sns.heatmap(temp, annot=<span class="literal">True</span>, vmax=<span class="number">1</span>, vmin=<span class="number">0</span>)</span><br><span class="line">ax.set_title(<span class="string">&quot;IC ABS Mean&quot;</span>, fontsize=<span class="number">21</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211630716.png" alt=""></p><p>æ•´ä½“ä¸Šå¯è§ IC çš„ç»å¯¹å€¼çš„å¹³å‡å€¼æœ€é«˜çš„æ˜¯ä¸Šè¯50ï¼Œå…¶æ¬¡æ˜¯æ²ªæ·±300ï¼Œå†æ¬¡æ˜¯ä¸­è¯500ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šè¯50æŒ‡æ•°çš„å› å­é€‰è‚¡èƒ½åŠ›æ›´åŠ æ˜æ˜¾ï¼Œä½†æ³¢åŠ¨ä¹Ÿè¾ƒå¤§ã€‚</p><p>æ¢æ‰‹ç‡å› å­å’Œå¸‚å€¼å› å­åœ¨å¤§éƒ¨åˆ†æŒ‡æ•°ä¸­ç»å¯¹å€¼å¹³å‡å€¼æœ€å¤§ï¼Œå¯è§å…¶æ³¢åŠ¨æ€§æœ€å¤§ã€‚</p><p>å‡€åˆ©æ¶¦å¢é•¿ç‡å› å­çš„ç»å¯¹å€¼å¹³å‡å€¼æœ€å°ï¼Œè¯¥å› å­çš„æ³¢åŠ¨æ€§æœ€å°ã€‚</p><p>æ­¤ç»“è®ºä¸ IC å‡å€¼å¹´åº¦åˆ†æç»“æœåŸºæœ¬ä¸€è‡´ã€‚</p><p>æ¥ä¸‹æ¥åˆ†å¹´åº¦å±•ç¤ºäº†å„å› å­ IC çš„ç»å¯¹å€¼å¹³å‡å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Year = [<span class="string">&#x27;2013&#x27;</span>,<span class="string">&#x27;2014&#x27;</span>,<span class="string">&#x27;2015&#x27;</span>,<span class="string">&#x27;2016&#x27;</span>,<span class="string">&#x27;2017&#x27;</span>]</span><br><span class="line">Fields = [<span class="string">&#x27;trunover_ratio&#x27;</span>,<span class="string">&#x27;pe_ratio&#x27;</span>,<span class="string">&#x27;market_cap&#x27;</span>,<span class="string">&#x27;capitalization&#x27;</span>,<span class="string">&#x27;eps&#x27;</span>,<span class="string">&#x27;roe&#x27;</span>,<span class="string">&#x27;inc_net_profit_year_on_year&#x27;</span>]</span><br><span class="line">total1 = pd.DataFrame()</span><br><span class="line">total2 = pd.DataFrame()</span><br><span class="line">total3 = pd.DataFrame()</span><br><span class="line">total4 = pd.DataFrame()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Year)):</span><br><span class="line">    total1[Year[i]] = IC_A.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total2[Year[i]] = IC_SH50.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total3[Year[i]] = IC_HS300.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">    total3[Year[i]] = IC_ZZ500.iloc[i*<span class="built_in">len</span>(explore1)/<span class="number">5</span>:(i+<span class="number">1</span>)*<span class="built_in">len</span>(explore1)/<span class="number">5</span>,:].mean()</span><br><span class="line">x = np.array(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)))</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Fields:</span><br><span class="line">    plt.bar(x, total1.loc[i], <span class="number">0.3</span>, label = i)</span><br><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="built_in">len</span>(Year)),Year)</span><br><span class="line">ax.set_title(<span class="string">&quot;A&quot;</span>,fontsize=<span class="number">21</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="C:/Users/yumiaomiao/Desktop/1.png" alt=""></p><p><img src="C:/Users/yumiaomiao/Desktop/2.png" alt="2"></p><p><img src="C:/Users/yumiaomiao/Desktop/3.png" alt="3"></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211633931.png" alt="4"></p><h3 id="å› å­ç»„åˆç¡®å®š"><a href="#å› å­ç»„åˆç¡®å®š" class="headerlink" title="å› å­ç»„åˆç¡®å®š"></a>å› å­ç»„åˆç¡®å®š</h3><p>å› å­ç»„åˆçš„è¯„åˆ¤æ ‡å‡†åˆ†ä¸ºä¸‰ç‚¹ï¼šå› å­æš´éœ²åº¦ã€å› å­ç›¸å…³å¼ºåº¦å’Œå› å­é€‰ä¸ªè‚¡èƒ½åŠ›ã€‚</p><ul><li><p>ä¸‰å¤§è‚¡æŒ‡çš„å¸‚å€¼å’Œè‚¡æœ¬å› å­çš„åç¦»åº¦å‡æ˜¯æœ€é«˜çš„ã€‚ä¸­ç­‰åç¦»åº¦çš„å› å­åŒ…æ‹¬ï¼šæ¢æ‰‹ç‡ã€ROEã€PEã€EPS å› å­ã€‚åç¦»åº¦æœ€å°çš„æ˜¯å‡€åˆ©æ¶¦å¢é•¿ç‡å› å­ã€‚</p></li><li><p>éœ€å‰”é™¤çš„ç›¸å…³å¼ºåº¦è¾ƒé«˜çš„ç»„åˆæœ‰ï¼šè‚¡æœ¬&amp;å¸‚å€¼ã€ROE&amp;å¸‚å€¼ã€EPS&amp;å¸‚å€¼ã€å‡€åˆ©æ¶¦å¢é•¿ç‡&amp;å¸‚å€¼ã€ROE&amp;EPSã€å‡€åˆ©æ¶¦å¢é•¿ç‡&amp;EPSã€å‡€åˆ©æ¶¦å¢é•¿ç‡å’ŒROEã€‚</p></li><li><p>æ¢æ‰‹ç‡å› å­é€‰è‚¡èƒ½åŠ›è¾ƒå¼ºï¼Œå‡€åˆ©æ¶¦å¢é•¿ç‡è¾ƒå¼±ã€‚</p></li></ul><p>ç»¼åˆä»¥ä¸Šç»“è®ºï¼Œç»¼åˆé€‰æ‹©æš´éœ²åº¦é«˜ã€ç›¸å…³å¼ºåº¦ä½å’Œé€‰è‚¡èƒ½åŠ›å¼ºçš„å› å­ï¼Œå³è‚¡æœ¬ã€æ¢æ‰‹ç‡å’ŒEPSä½œä¸ºä¸‰å› å­ç»„åˆè¾ƒä¸ºåˆé€‚ã€‚</p><h3 id="æ¨¡å‹é€‰è‚¡"><a href="#æ¨¡å‹é€‰è‚¡" class="headerlink" title="æ¨¡å‹é€‰è‚¡"></a>æ¨¡å‹é€‰è‚¡</h3><p>æœ¬æ–‡é‡‡ç”¨æ”¶ç›Šç‡é¢„æµ‹æ–¹å¼è¿›è¡Œé€‰è‚¡ï¼ŒåŸºäºæ¨¡å‹å¯¹æ—¥é¢‘å› å­æ”¶ç›Šç‡è¿›è¡Œè®¡ç®—ï¼Œé¢„æµ‹è‚¡ç¥¨æœªæ¥æ”¶ç›Šã€‚</p><p>æ”¶ç›Šé¢„æµ‹æ¨¡å‹æœ‰ä¸‰ç§ï¼šæ”¶ç›Šç§»åŠ¨å‡å€¼æ¨¡å‹ã€æ”¶ç›ŠåŠ æƒç§»åŠ¨å‡å€¼æ¨¡å‹ã€æ®‹å·®æ¨¡å‹ã€‚</p><p>æ ¹æ®ä¸­å›½é“¶æ²³è¯åˆ¸ç ”æŠ¥ã€ŠåŸºäºå¤šå› å­æ¡†æ¶çš„æ”¶ç›Šé¢„æµ‹æ¨¡å‹ã€‹ä¸€æ–‡ï¼Œå¯¹ä¸‰ç§æ”¶ç›Šç‡å›æµ‹æ¨¡å‹è¿›è¡Œ 10 å±‚åˆ†å±‚å›æµ‹å’Œä¸åŒé¢„æµ‹å‘¨æœŸå›æµ‹ç»“æœå¯å¾—ï¼šæ®‹å·®æ¨¡å‹æ›´é€‚åˆå»é™¤é£é™©ä¸ªè‚¡ï¼›å’Œæ”¶ç›Šç§»åŠ¨å‡å€¼æ¨¡å‹ç›¸æ¯”ï¼Œæ”¶ç›ŠåŠ æƒç§»åŠ¨å‡å€¼æ¨¡å‹çš„åˆ†å±‚èƒ½åŠ›æ›´å¼ºã€‚åœ¨æ”¶ç›ŠåŠ æƒç§»åŠ¨å‡å€¼æ¨¡å‹ä¸­ï¼ŒÎ»å–å€¼ 19ã€‚</p><p>å› æ­¤ï¼Œæœ¬æ–‡çš„å›æµ‹é˜¶æ®µé‡‡ç”¨æ”¶ç›ŠåŠ æƒç§»åŠ¨å‡å€¼æ¨¡å‹é¢„æµ‹æœªæ¥è‚¡ç¥¨æ”¶ç›Šã€‚</p><h3 id="å›æµ‹"><a href="#å›æµ‹" class="headerlink" title="å›æµ‹"></a>å›æµ‹</h3><p>å›æµ‹æ—¶é—´ï¼š2018.1.1-2021.4.1ï¼Œå…±3å¹´é›¶3ä¸ªæœˆã€‚</p><p>é€‰å–å› å­ï¼šè‚¡æœ¬ã€æ¢æ‰‹ç‡å’Œ EPS ç»„åˆã€‚</p><h4 id="å¯¼å…¥å‡½æ•°åº“"><a href="#å¯¼å…¥å‡½æ•°åº“" class="headerlink" title="å¯¼å…¥å‡½æ•°åº“"></a>å¯¼å…¥å‡½æ•°åº“</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> jqdata <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"><span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</span><br><span class="line"><span class="keyword">from</span> six <span class="keyword">import</span> StringIO</span><br><span class="line">frome jqfactor <span class="keyword">import</span> winsorize_med</span><br><span class="line"><span class="keyword">from</span> jqfactor <span class="keyword">import</span> neutralize</span><br><span class="line"><span class="keyword">from</span> jqfactor <span class="keyword">import</span> standardlize</span><br><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br></pre></td></tr></table></figure><h4 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h4><p>å‰”é™¤STè‚¡ï¼Œå‰”é™¤åœç‰ŒåŠé€€å¸‚è‚¡ç¥¨ï¼Œå‰”é™¤ä¸Šå¸‚ä¸è¶³3ä¸ªæœˆçš„è‚¡ç¥¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_stock_A</span>(<span class="params">begin_date</span>):</span><br><span class="line">    begin_date = <span class="built_in">str</span>(begin_date)</span><br><span class="line">    stockList = get_index_stocks(<span class="string">&#x27;000002.XSHG&#x27;</span>, begin_date)+get_index_stocks(<span class="string">&#x27;399107.XSHE&#x27;</span>,begin_date)</span><br><span class="line">    st_data = get_extras(<span class="string">&#x27;is_st&#x27;</span>,stockList,count=<span class="number">1</span>,end_date=begin_date)</span><br><span class="line">    stockList = [stock <span class="keyword">for</span> stock <span class="keyword">in</span> stockList <span class="keyword">if</span> <span class="keyword">not</span> st_data[stock][<span class="number">0</span>]]</span><br><span class="line">    stockList = delect_stop(stockList,begin_date)</span><br><span class="line">    <span class="keyword">return</span> stockList</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delect_stop</span>(<span class="params">stocks,beginDate,n=<span class="number">30</span>*<span class="number">3</span></span>):</span><br><span class="line">    stockList = []</span><br><span class="line">    beginDate = datetime.datetime.strptime(beginDate,<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> stock <span class="keyword">in</span> stocks:</span><br><span class="line">        start_date = get_security_info(stock).start_date</span><br><span class="line">        <span class="keyword">if</span> start_date &lt; (beginDate=datetime.timedelta(day = n)).date():</span><br><span class="line">            stockList.append(stock)</span><br><span class="line">    <span class="keyword">return</span> stockList</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹è®¾å®š"><a href="#åˆå§‹è®¾å®š" class="headerlink" title="åˆå§‹è®¾å®š"></a>åˆå§‹è®¾å®š</h4><p>è‚¡ç¥¨æ± ä¸ºæ²ªæ·±300ï¼ŒæŒæœ‰è‚¡ç¥¨æ€»æ•°é‡ä¸º100åªï¼Œè°ƒä»“å¤©æ•°ä¸º20å¤©ã€‚</p><p>ä¹°å…¥è‚¡ç¥¨æ—¶ä½£é‡‘ä¸‡åˆ†ä¹‹ä¸‰ï¼Œå–å‡ºæ—¶ä½£é‡‘ä¸‡åˆ†ä¹‹ä¸‰åŠ åƒåˆ†ä¹‹ä¸€å°èŠ±ç¨ï¼Œæ¯ç¬”äº¤æ˜“ä½£é‡‘æœ€ä½æ‰£5å—é’±ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">context</span>):</span><br><span class="line">    set_benchmark(<span class="string">&#x27;00300.XSHG&#x27;</span>)</span><br><span class="line">    set_option(<span class="string">&#x27;use_real_price&#x27;</span>, <span class="literal">True</span>)</span><br><span class="line">    log.set_level(<span class="string">&#x27;order&#x27;</span>,<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    g.num = <span class="number">100</span></span><br><span class="line">    g.n = <span class="number">0</span></span><br><span class="line">    g.N = <span class="number">20</span></span><br><span class="line">    g.Day = <span class="number">20</span></span><br><span class="line">    g.alpha = <span class="number">0.05</span></span><br><span class="line">    set_order_cost(OrderCost(close_tax=<span class="number">0.001</span>, open_commission=<span class="number">0.0003</span>, close_commission=<span class="number">0.0003</span>, min_commission=<span class="number">5</span>), <span class="built_in">type</span>=<span class="string">&#x27;stock&#x27;</span>)</span><br><span class="line">    run_daily(market_open, time=<span class="string">&#x27;9:30&#x27;</span>, reference_security=<span class="string">&#x27;000300.XSHG&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="æ„å»ºå› å­ï¼Œä¹°å…¥è‚¡ç¥¨"><a href="#æ„å»ºå› å­ï¼Œä¹°å…¥è‚¡ç¥¨" class="headerlink" title="æ„å»ºå› å­ï¼Œä¹°å…¥è‚¡ç¥¨"></a>æ„å»ºå› å­ï¼Œä¹°å…¥è‚¡ç¥¨</h4><p>è·å–å› å­æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œå»æå€¼å’Œæ ‡å‡†åŒ–ã€‚</p><p>ä½¿ç”¨æ”¶ç›ŠåŠ æƒç§»åŠ¨å‡å€¼æ¨¡å‹ï¼Œé¢„æµ‹æœªæ¥è‚¡ç¥¨æ”¶ç›Šï¼Œç­‰æƒé‡ä¹°å…¥æ’åå‰ 100 çš„è‚¡ç¥¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">GetWeight</span>(<span class="params">context, N</span>):</span><br><span class="line">    date = context.previous_date</span><br><span class="line">    stockList = get_stock_A(date)</span><br><span class="line">    df_close = get_price(stockList, count=N+<span class="number">1</span>, end_date=date, frequency=<span class="string">&#x27;1d&#x27;</span>, fields=[<span class="string">&#x27;close&#x27;</span>][<span class="string">&#x27;close&#x27;</span>])</span><br><span class="line">    pchg = df_close.pct_change().shift(-<span class="number">1</span>).iloc[:-<span class="number">1</span>]</span><br><span class="line">    pchg = pchg.T</span><br><span class="line">    weight = pd.DataFrame()</span><br><span class="line">    n = <span class="built_in">len</span>(pchg.columns)</span><br><span class="line">    sunWeight = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> pchg.columns:</span><br><span class="line">        n -=<span class="number">1</span></span><br><span class="line">        df_fund = get_fundamentals(query(valuation.code, valuation.turnover_ratio, valuation.capitalizaton, indicator.eps).<span class="built_in">filter</span>(valuation.code.in_(stockList)).date=)</span><br><span class="line">        df_fund = df_fund.set_index([<span class="string">&#x27;code&#x27;</span>])</span><br><span class="line">        df_fund = winsorize_med(df_fund, scale=<span class="number">1</span>, inclusive=<span class="literal">True</span>, inf2nan=<span class="literal">True</span>, axis=<span class="number">0</span>)</span><br><span class="line">        df_fund = standardlize(df_fund,inf2nan=<span class="literal">True</span>, axis=<span class="number">0</span>)</span><br><span class="line">        df_fund[<span class="string">&#x27;pchg&#x27;</span>] = pchg[i]</span><br><span class="line">        df_fund = df_fund.dropna()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> df_fund.empty:</span><br><span class="line">            x = df_fund[[<span class="string">&#x27;turnover_ratio&#x27;</span>,<span class="string">&#x27;capitalization&#x27;</span>,<span class="string">&#x27;eps&#x27;</span>]]</span><br><span class="line">            y = df_fund[<span class="string">&#x27;pchg&#x27;</span>]</span><br><span class="line">            wls = sm.OLS(y,x)</span><br><span class="line">            result = wls.fit()</span><br><span class="line">            weight[i] = result.params * np.power(<span class="number">1</span>-g.alpha, n)</span><br><span class="line">        sumWeight += np.power(<span class="number">1</span>-g.alpha, n)</span><br><span class="line">    weight = weight.<span class="built_in">sum</span>(axis = <span class="number">1</span>)/sumWeight</span><br><span class="line">    <span class="keyword">return</span> weight</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">GetPredict</span>(<span class="params">context,weight</span>):</span><br><span class="line">    date = context.previous_date</span><br><span class="line">    stockList = get_stock_A(date)</span><br><span class="line">    df_fund = get_fundamentals(query(valuation.code, valuation.turnover_ratio, valuation.capitalizaton, indicator.eps).<span class="built_in">filter</span>(valuation.code.in_(stockList)).date=)</span><br><span class="line">    df_fund = df_fund.set_index([<span class="string">&#x27;code&#x27;</span>])</span><br><span class="line">    df_fund = winsorize_med(df_fund, scale=<span class="number">1</span>, inclusive=<span class="literal">True</span>, inf2nan=<span class="literal">True</span>, axis=<span class="number">0</span>)</span><br><span class="line">    df_fund = standardlize(df_fund,inf2nan=<span class="literal">True</span>, axis=<span class="number">0</span>)</span><br><span class="line">    df_data = df_fund.dot(weight)</span><br><span class="line">    df_data.sort(ascending = <span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">return</span> df_data</span><br></pre></td></tr></table></figure><h4 id="å›æµ‹ç»“æœ"><a href="#å›æµ‹ç»“æœ" class="headerlink" title="å›æµ‹ç»“æœ"></a>å›æµ‹ç»“æœ</h4><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303211642228.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> é‡åŒ–æŠ•èµ„ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Momentum strategy </tag>
            
            <tag> Quantitative investment </tag>
            
            <tag> JoinQuant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡åŒ–æ‹©æ—¶â€”â€”æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼ˆäºŒï¼‰ï¼šå®ä¾‹</title>
      <link href="/2023/03/18/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%AE%9E%E4%BE%8B/"/>
      <url>/2023/03/18/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å†…å®¹åŸºäº<a href="https://uqer.datayes.com/">ä¼˜çŸ¿å¹³å°</a>å®ç°ï¼Œä¸ºåœ¨æ ¡è¯¾ç¨‹ä½œä¸šï¼Œä»æœ‰è¾ƒå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><h3 id="æ•°æ®é€‰å–"><a href="#æ•°æ®é€‰å–" class="headerlink" title="æ•°æ®é€‰å–"></a>æ•°æ®é€‰å–</h3><p>é€‰å–2013.3.1-2019.4.2çš„æ²ªæ·±300æŒ‡æ•°ï¼Œå…¶ä¸­2013.3.1-2018.3.31çš„æ•°æ®ç”¨æ¥è®­ç»ƒæ¨¡å‹å„å‚æ•°ï¼Œ2018.4.1-2019.4.1çš„æ•°æ®ä½œä¸ºæµ‹è¯•é›†ï¼Œå³ç”¨æ¥å›æµ‹æ¨¡å‹çš„æ•ˆæœã€‚</p><p>åŒæ—¶ï¼Œä¸ºäº†å»é™¤æ•°æ®çš„é‡çº²ä¸åŒå¸¦æ¥çš„å½±å“ï¼Œæˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œäº†Z-scoreæ ‡å‡†åŒ–ã€‚</p><h3 id="ç‰¹å¾æŒ‡æ ‡é€‰å–"><a href="#ç‰¹å¾æŒ‡æ ‡é€‰å–" class="headerlink" title="ç‰¹å¾æŒ‡æ ‡é€‰å–"></a>ç‰¹å¾æŒ‡æ ‡é€‰å–</h3><p>åœ¨é¢„æµ‹é—®é¢˜ä¸­ï¼Œæœ¬æ–‡å°†ç‰¹å¾æŒ‡æ ‡è¡¨ç¤ºä¸ºä¸€ä¸ªç»´æ•°ä¸ºnçš„å‘é‡ï¼Œå…¶é€‰å–éœ€è¦éµå¾ªä¸¤ä¸ªåŸåˆ™ï¼š</p><ul><li><p>ç‰¹å¾æŒ‡æ ‡çš„æ•°é‡ä¸èƒ½è¿‡å°‘ï¼Œé€‰å–çš„ç‰¹å¾æŒ‡æ ‡éœ€è¦å……åˆ†çš„ä½œä¸ºè§£é‡Šå˜é‡ã€‚ç‰¹å¾æŒ‡æ ‡ä½œä¸ºé¢„æµ‹ç›®æ ‡çš„é‡è¦å› ç´ ï¼Œæœ¬èº«éå¸¸å…·æœ‰ä»·å€¼ï¼Œå……åˆ†çš„é€‰å–æœ‰åˆ©äºé¢„æµ‹å‡†ç¡®æ€§çš„æé«˜ã€‚</p></li><li><p>ç‰¹å¾æŒ‡æ ‡çš„æ•°é‡ä¸èƒ½è¿‡å¤šï¼Œå…³ç³»ä¸å¤§æˆ–è€…æ— å…³çš„ç‰¹å¾æŒ‡æ ‡è¦å°½å¯èƒ½å‰”é™¤ã€‚ç‰¹å¾æŒ‡æ ‡æ•°é‡è¿‡å¤šä¼šä½¿å¾—VCç»´è¿‡é«˜ï¼Œè®¡ç®—é‡æ€¥å‰§ä¸Šå‡ï¼Œè§£å†³é—®é¢˜çš„è§„æ¨¡ä¹Ÿä¼šéå¸¸å¤§ï¼ŒåŒæ—¶å®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆé—®é¢˜ã€‚</p></li></ul><p>åŸºäºæ”¯æŒå‘é‡æœºæ‹©æ—¶çš„ç‰¹å¾æŒ‡æ ‡ä¸»è¦æœ‰ä»¥ä¸‹å››ç±»ï¼š</p><ul><li><p>æ—¶é—´åºåˆ—æ•°æ®æŒ‡æ ‡ã€‚ä¾‹å¦‚æ”¶ç›˜ä»·ã€æˆäº¤é¢ã€ä¹°å…¥ä»·ã€æŒä»“é‡ç­‰ã€‚</p></li><li><p>æŠ€æœ¯æŒ‡æ ‡ã€‚æŠ€æœ¯æŒ‡æ ‡åœ¨è‚¡ç¥¨æŠ•èµ„ä¸­ä¸»è¦ç”¨äºæŠ€æœ¯åˆ†æï¼Œä½†åœ¨ç»™äºˆæ”¯æŒå‘é‡æœºæ‹©æ—¶ä¸­ä»…ä»…ä½œä¸ºç‰¹å¾æŒ‡æ ‡æ¥ä½¿ç”¨ã€‚æŠ€æœ¯æŒ‡æ ‡çš„ç§ç±»ç¹å¤šï¼Œåœ¨é€‰æ‹©æ—¶è¦é€‰æ‹©ä¸è‚¡ä»·å…³ç³»å¯†åˆ‡çš„æŒ‡æ ‡ã€‚</p></li><li><p>å®è§‚å˜é‡æŒ‡æ ‡ã€‚å¯¹äºæŠ•èµ„æœŸé™è¾ƒé•¿çš„é¢„æµ‹ï¼Œä¸å°‘æ¨¡å‹ä¼šåŠ å…¥å®è§‚å˜é‡æŒ‡æ ‡ã€‚ä¾‹å¦‚åˆ©ç‡ã€æ±‡ç‡ã€CPI-PPIã€M1ã€M2ã€é‡‘ä»·ã€è¿›å‡ºå£é¢ã€æ¶ˆè´¹è€…ä¿¡æ¯æŒ‡æ•°ï¼Œç”šè‡³åŒ…æ‹¬å¤§ç›˜æŒ‡æ•°ä½œä¸ºåˆ¤æ–­å¤§åŠ¿è¶‹åŠ¿ç­‰ç­‰ã€‚å®è§‚å˜é‡æŒ‡æ ‡å¹¶ä¸å•ç‹¬ä½¿ç”¨ï¼Œå¾€å¾€ä¼šé€‰å–ä¸€ä¸ªæˆ–è€…å‡ ä¸ªä¸æ—¶é—´åºåˆ—æŒ‡æ ‡æˆ–æŠ€æœ¯æŒ‡æ ‡ç»“åˆä½¿ç”¨ã€‚</p></li><li><p>åˆ›æ–°æŒ‡æ ‡ã€‚ä¾‹å¦‚åˆ©ç”¨ç½‘ç»œçˆ¬è™«æŠ€æœ¯ï¼Œè‡ªåŠ¨æŠ“å–å¹¶é‡åŒ–æŠ•èµ„è€…æƒ…ç»ªä½œä¸ºç‰¹å¾æŒ‡æ ‡ã€‚æœ‰çš„åˆ™åŸºäºç½‘ç»œèˆ†æƒ…ï¼ŒæŠ“å–å¾®åšã€è‚¡å§ç­‰è‚¡è¯„è§‚ç‚¹ï¼Œé‡åŒ–å¯¹ç½‘ç»œèˆ†æƒ…ä½œä¸ºç‰¹å¾æŒ‡æ ‡ç­‰ã€‚è¿™äº›åˆ›æ–°çš„ç‰¹å¾æŒ‡æ ‡ä¹Ÿå¾€å¾€éœ€è¦ç»“åˆæ—¶é—´åºåˆ—æŒ‡æ ‡æˆ–è€…æŠ€æœ¯æŒ‡æ ‡æ¥ä½¿ç”¨ã€‚</p></li></ul><p>åŸºæœ¬é¢æ•°æ®ä¸€èˆ¬ä¼šä½œä¸ºä¸­é•¿æœŸæ‹©æ—¶çš„ç‰¹å¾æŒ‡æ ‡ï¼Œä½†è¿™é‡Œå¹¶æ²¡æœ‰å°†åŸºæœ¬é¢ä½œä¸ºç‰¹å¾æŒ‡æ ‡ï¼Œä¸»è¦åŸå› ï¼šä¸€æ˜¯åŸºæœ¬é¢æ•°æ®åœ¨æ”¯æŒå‘é‡æœºçš„è¿ç”¨ä¸»è¦ç”¨äºæ‹©è‚¡ï¼›äºŒæ˜¯æˆ‘å›½è‚¡å¸‚èµ·æ­¥è¾ƒæ™šï¼ŒåŸºæœ¬é¢æ•°æ®ä¸å®è§‚æ•°æ®å…¬å¸ƒçš„é¢‘ç‡æ¯”è¾ƒä½ï¼Œæœ€çŸ­çš„æœˆåº¦æ•°é‡ä¹Ÿæ¯”è¾ƒæœ‰é™ï¼Œæ•°æ®é‡çš„æœ‰é™ä½¿å¾—å¯¹å•åªè‚¡ç¥¨ä½¿ç”¨è¿™äº›æ•°æ®è¿›è¡Œæ‹©æ—¶æ¯”è¾ƒå›°éš¾ã€‚</p><p>æˆ‘ä»¬é€šè¿‡ç ”ç©¶ç°æœ‰ç ”ç©¶æŠ¥å‘Šå’Œæ–‡çŒ®ï¼Œä»¥åŠç»“åˆæ•°æ®çš„å¯è·å–éš¾æ˜“ç¨‹åº¦ï¼Œé€‰å–äº†æ¯”è¾ƒæˆç†Ÿã€è¢«è¯æ˜æœ‰æ•ˆçš„ç‰¹å¾æŒ‡æ ‡å¦‚ä¸‹ï¼š</p><ul><li><p>X1â€”â€”æ”¶ç›˜æŒ‡æ•°</p></li><li><p>X2â€”â€”å½“æ—¥æœ€å¤§æŒ‡æ•°</p></li><li><p>X3â€”â€”å½“æ—¥æœ€å°æŒ‡æ•°</p></li><li><p>X4â€”â€”æ¶¨è·Œå¹…</p></li><li><p>X5â€”â€”æˆäº¤é‡</p></li><li><p>X6â€”â€”å‰30æ—¥å¹³å‡æ¶¨è·Œå¹…</p></li><li><p>X7â€”â€”å‰30æ—¥æœ€å¤§æ—¥æ³¢åŠ¨</p></li></ul><h3 id="SVMæ¨¡å‹è¯„ä»·æŒ‡æ ‡é€‰å–"><a href="#SVMæ¨¡å‹è¯„ä»·æŒ‡æ ‡é€‰å–" class="headerlink" title="SVMæ¨¡å‹è¯„ä»·æŒ‡æ ‡é€‰å–"></a>SVMæ¨¡å‹è¯„ä»·æŒ‡æ ‡é€‰å–</h3><p>æœ¬æ–‡é€‰å–çš„ç­–ç•¥è¯„ä»·æŒ‡æ ‡æœ‰å¹´åŒ–æ”¶ç›Šç‡ã€è´å¡”ã€å¤æ™®æ¯”ç‡ã€æ”¶ç›Šæ³¢åŠ¨ç‡ã€ä¿¡æ¯æ¯”ç‡å’Œæœ€å¤§å›æ’¤ç‡ã€‚</p><p>å¹´åŒ–æ”¶ç›Šç‡ä¸å¹´åŒ–æ ‡å‡†å·®æ˜¯å‡è®¾å…¨å¹´éƒ½æŒ‰æµ‹è¯•æœŸå†…çš„è¡¨ç°è€Œèƒ½è·å¾—çš„æ”¶ç›Šç‡å’Œè¾¾åˆ°çš„æ ‡å‡†å·®ï¼Œé€šè¿‡å¹´åŒ–çš„æ–¹å¼å¯ä»¥ä»ç†è®ºä¸Šçœ‹åˆ°ç­–ç•¥åœ¨ä¸€å¹´å†…çš„æ”¶ç›Šä¸é£é™©çš„è¡¨ç°ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¯¹äºä¸åŒæ—¶é•¿æƒ…å†µä¸‹çš„æ”¶ç›Šå’Œé£é™©æƒ…å†µè¿›è¡Œæ¯”è¾ƒã€‚</p><p>å¤æ™®æ¯”ç‡æ˜¯å•ä½é£é™©çš„è¶…é¢æ”¶ç›Šæƒ…å†µï¼Œå®ƒæ˜¯æœ€ä¸ºç»å…¸çš„æ”¶ç›Šä¸é£é™©è¿›è¡Œç»¼åˆåº¦é‡çš„æŒ‡æ ‡ï¼Œä¹Ÿæ˜¯ç»å¤§å¤šæ•°ç­–ç•¥æ¨¡å‹éƒ½ä¼šä½¿ç”¨çš„è¯„ä»·æŒ‡æ ‡ã€‚</p><p>æœ€å¤§å›æ’¤ç‡è¡¨æ˜çš„æ˜¯ç­–ç•¥åœ¨è¿è¡Œæ—¶å†…å‡ºç°çš„æœ€å¤§äºæŸï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šå¯ä»¥è®¤ä¸ºæœ€å¤§å›æ’¤ç‡æ˜¯è¡¡é‡é£é™©çš„æ›´é‡è¦æŒ‡æ ‡ã€‚</p><h3 id="å‚æ•°è®¾å®š"><a href="#å‚æ•°è®¾å®š" class="headerlink" title="å‚æ•°è®¾å®š"></a>å‚æ•°è®¾å®š</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> CAL.PyCAL <span class="keyword">import</span> Date</span><br><span class="line"><span class="keyword">from</span> CAL.PyCAL <span class="keyword">import</span> Calendar</span><br><span class="line"><span class="keyword">from</span> CAL.PyCAL <span class="keyword">import</span> BizDayConvention</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line">start = <span class="string">&#x27;2019-01-01&#x27;</span>  <span class="comment">#å›æµ‹èµ·å§‹æ—¶é—´</span></span><br><span class="line">end = <span class="string">&#x27;2019-04-01&#x27;</span>  <span class="comment">#å›æµ‹ç»“æŸæ—¶é—´</span></span><br><span class="line">benchmark = <span class="string">&#x27;HS300&#x27;</span>  <span class="comment">#å‚è€ƒæ ‡å‡†</span></span><br><span class="line">universe = set_universe(<span class="string">&#x27;HS300&#x27;</span>)  <span class="comment">#è¯åˆ¸æ± </span></span><br><span class="line">capital_base = <span class="number">100000</span>  <span class="comment">#èµ·å§‹èµ„é‡‘</span></span><br><span class="line">freq = <span class="string">&#x27;d&#x27;</span>  <span class="comment">#æ•°æ®é¢‘ç‡</span></span><br><span class="line">refresh_rate = <span class="number">1</span>  <span class="comment">#è°ƒä»“é¢‘ç‡</span></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fields = [<span class="string">&#x27;tradeDate&#x27;</span>,<span class="string">&#x27;closeIndex&#x27;</span>,<span class="string">&#x27;highestIndex&#x27;</span>,<span class="string">&#x27;lowstIndex&#x27;</span>,<span class="string">&#x27;turnoverVol&#x27;</span>,<span class="string">&#x27;CHG&#x27;</span>,<span class="string">&#x27;CHGPct&#x27;</span>]</span><br><span class="line">stock = <span class="string">&#x27;00300&#x27;</span></span><br><span class="line">index_raw = DataAPI.MktIdxdGet(ticker=stock,beginDate=<span class="string">u&quot;2013-03-01&quot;</span>,endDate=<span class="string">u&quot;2018-03-31&quot;</span>,field-fields,pandas=<span class="string">&quot;1&quot;</span>)</span><br><span class="line"></span><br><span class="line">index_date = index_raw.set_index(<span class="string">&#x27;tradeDate&#x27;</span>)</span><br><span class="line">index_date = index_date.dropna()</span><br><span class="line">index_date[<span class="string">&#x27;max_difference&#x27;</span>] = index_date[<span class="string">&#x27;highestIndex&#x27;</span>] - index_date[<span class="string">&#x27;lowestIndex&#x27;</span>]</span><br><span class="line"></span><br><span class="line">index_date[<span class="string">&#x27;max_of_30day&#x27;</span>] = <span class="literal">None</span></span><br><span class="line">index_date[<span class="string">&#x27;min_of_30day&#x27;</span>] = <span class="literal">None</span></span><br><span class="line">index_date[<span class="string">&#x27;max_difference_of_30day&#x27;</span>] = <span class="literal">None</span></span><br><span class="line">index_date[<span class="string">&#x27;closeIndex_after30day&#x27;</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="built_in">len</span>(index_date)-<span class="number">30</span>):</span><br><span class="line">    index_date[<span class="string">&#x27;max_of_30day&#x27;</span>][i+<span class="number">30</span>] = <span class="built_in">max</span>(index_date[<span class="string">&#x27;highestIndex&#x27;</span>][i:i+<span class="number">30</span>])</span><br><span class="line">    index_date[<span class="string">&#x27;min_of_30day&#x27;</span>][i+<span class="number">30</span>] = <span class="built_in">min</span>(index_date[<span class="string">&#x27;lowestIndex&#x27;</span>][i:i+<span class="number">30</span>])</span><br><span class="line">    index_date[<span class="string">&#x27;max_difference_of_30day&#x27;</span>][i+<span class="number">30</span>] = <span class="built_in">max</span>(index_date[<span class="string">&#x27;max_difference&#x27;</span>][i:i+<span class="number">30</span>])</span><br><span class="line">    index_date[<span class="string">&#x27;closeIndex_after30day&#x27;</span>][i] = index_date[<span class="string">&#x27;closeIndex&#x27;</span>][i:i+<span class="number">30</span>]</span><br><span class="line">    </span><br><span class="line">index_date = index_date.dropna()</span><br><span class="line">lables_raw = index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>]</span><br><span class="line">lables = index_date[<span class="string">&#x27;closeIndex_after30days&#x27;</span>] &gt; index_date[<span class="string">&#x27;closeIndex&#x27;</span>]</span><br><span class="line">lables_ud = lables.replace(&#123;<span class="literal">True</span>:<span class="string">&#x27;up&#x27;</span>,<span class="literal">False</span>:<span class="string">&#x27;down&#x27;</span>&#125;)</span><br><span class="line">features = index_date.drop([<span class="string">&#x27;closeIndex_after30days&#x27;</span>],axis = <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—è°ƒå‚å‰çš„æ¨¡å‹å‡†ç¡®ç‡"><a href="#è®¡ç®—è°ƒå‚å‰çš„æ¨¡å‹å‡†ç¡®ç‡" class="headerlink" title="è®¡ç®—è°ƒå‚å‰çš„æ¨¡å‹å‡†ç¡®ç‡"></a>è®¡ç®—è°ƒå‚å‰çš„æ¨¡å‹å‡†ç¡®ç‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> cross_validation</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing</span><br><span class="line">scaler = preprocessing.StandardScaler().fit(features)</span><br><span class="line">features_scaler = scaler.transform(features)</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = cross_validation.train_test_split(features_scaler, lables, test_size = <span class="number">0.2</span>, random_state = <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">clf_svm = svm.SVC()</span><br><span class="line">clf_svm.fit(X_train, y_train)</span><br><span class="line"><span class="built_in">print</span><span class="string">&quot;é¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š%0.2f&quot;</span> % (clf_svm.score(X_test, y_test))</span><br></pre></td></tr></table></figure><p>ç»“æœæ˜¾ç¤ºé¢„æµ‹å‡†ç¡®ç‡ä¸ºï¼š0.73ã€‚</p><h3 id="å‚æ•°å¯»ä¼˜"><a href="#å‚æ•°å¯»ä¼˜" class="headerlink" title="å‚æ•°å¯»ä¼˜"></a>å‚æ•°å¯»ä¼˜</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i_list = []</span><br><span class="line">score_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">300</span>,<span class="number">400</span>,<span class="number">1</span>):</span><br><span class="line">    i = i/<span class="number">1.</span></span><br><span class="line">    clf_svm = svm.SVC(C = i)</span><br><span class="line">    clf_svm.fit(X_train, y_train)</span><br><span class="line">    i_list.append(i)</span><br><span class="line">    score_list.append(clf_svm.score(X_test, y_test))</span><br><span class="line">    </span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;i_list&#x27;</span>:i_list,<span class="string">&#x27;score_list&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;i_list&#x27;</span>, y=<span class="string">&#x27;score_list&#x27;</span>, title=<span class="string">&#x27;score change with c&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¯¹Cå€¼è¿›è¡Œè°ƒå‚ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼Œæ²ªæ·±300å‚æ•°Cæœ€ä½³å–å€¼åœ¨325-365ä¹‹é—´ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190007771.png" alt=""></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i_list = []</span><br><span class="line">score_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">200</span>,<span class="number">1</span>):</span><br><span class="line">    i = i/<span class="number">100.</span></span><br><span class="line">    clf_svm = svm.SVC(C = <span class="number">350</span>, gamma = i)</span><br><span class="line">    clf_svm.fit(X_train, y_train)</span><br><span class="line">    i_list.append(i)</span><br><span class="line">    score_list.append(clf_svm.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;gamma_list&#x27;</span>:i_list,<span class="string">&#x27;score_list&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;gamma_list&#x27;</span>, y=<span class="string">&#x27;score_list&#x27;</span>, title=<span class="string">&#x27;score change with gamma&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¯¹gå€¼è¿›è¡Œè°ƒå‚ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼Œå‚æ•°gæœ€ä½³å–å€¼åœ¨1-1.02ä¹‹é—´ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190008309.png" alt=""></p><p>é‡‡ç”¨åŸºäºäº¤å‰éªŒè¯çš„ç½‘ç»œæœç´¢æ³•åœ¨å‚æ•°Cå’Œgçš„æœ€ä½³å–å€¼èŒƒå›´å†…å¯»æ‰¾æœ€ä¼˜è§£ï¼Œé€šè¿‡ä¼˜çŸ¿è®¡ç®—å‡ºå‚æ•°Cçš„æœ€ä¼˜å€¼ä¸º308ï¼Œgçš„æœ€ä¼˜å€¼ä¸º1.0ï¼Œå‚æ•°æœ€ä¼˜åŒ–ä¹‹åçš„æ¨¡å‹å‡†ç¡®ç‡æé«˜åˆ°0.8ã€‚</p><h3 id="æ¯”è¾ƒSVMä¸‰ç§å‡½æ•°çš„å‡†ç¡®ç‡"><a href="#æ¯”è¾ƒSVMä¸‰ç§å‡½æ•°çš„å‡†ç¡®ç‡" class="headerlink" title="æ¯”è¾ƒSVMä¸‰ç§å‡½æ•°çš„å‡†ç¡®ç‡"></a>æ¯”è¾ƒSVMä¸‰ç§å‡½æ•°çš„å‡†ç¡®ç‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">i_list = []</span><br><span class="line">score_list = []</span><br><span class="line"></span><br><span class="line">kernels = [<span class="string">&#x27;linear&#x27;</span>,<span class="string">&#x27;rbf&#x27;</span>,<span class="string">&#x27;sigmoid&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> kernels:</span><br><span class="line">    clf_svm = svm.SVC(C = <span class="number">350</span>, gamma = <span class="number">1</span>, kernel = i)</span><br><span class="line">    clf_svm.fit(X_train, y_train)</span><br><span class="line">    i_list.append(i)</span><br><span class="line">    score_list.append(clf_svm.score(X_test, y_test))</span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;kernels&#x27;</span>:i_list, <span class="string">&#x27;score_list&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;kernels&#x27;</span>, y=<span class="string">&#x27;score_list&#x27;</span>, title=<span class="string">&#x27;score change with kernels&#x27;</span>, kind=<span class="string">&#x27;bar&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190014180.png" alt=""></p><p>ä¸‰ç§å‡½æ•°ä¸­ï¼Œé«˜æ–¯å¾„å‘åŸºå‡½æ•°çš„å‡†ç¡®ç‡é«˜è¾¾0.8ã€‚</p><h3 id="åˆ¤æ–­æ¨¡å‹ç¨³å¥æ€§"><a href="#åˆ¤æ–­æ¨¡å‹ç¨³å¥æ€§" class="headerlink" title="åˆ¤æ–­æ¨¡å‹ç¨³å¥æ€§"></a>åˆ¤æ–­æ¨¡å‹ç¨³å¥æ€§</h3><p>ä¸ºäº†åˆ¤æ–­æ¨¡å‹æ˜¯å¦ç¨³å¥ï¼Œæˆ‘ä»¬è®©è®­ç»ƒé›†åˆå¤„äºå˜åŒ–ä¸­ï¼Œç„¶åè§‚å¯Ÿéšç€è®­ç»ƒé›†åˆçš„å˜åŒ–ï¼Œå‡†ç¡®ç‡çš„æ³¢åŠ¨èŒƒå›´å›¾ã€‚</p><p>è¿™é‡Œé‡‡å–çš„æ˜¯1000-2500æ•°æ®æ¯10ä¸ªå˜åŒ–ä¸€æ¬¡ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num_list = []</span><br><span class="line">score_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> xrange((<span class="built_in">len</span>(featrues_scaler)-<span class="number">1000</span>)/<span class="number">10</span>):</span><br><span class="line">    num_now = <span class="built_in">len</span>(features_scaler)%<span class="number">10</span> + <span class="number">10</span>*i +<span class="number">1000</span></span><br><span class="line">    X_train, X_test, y_train, y_test = cross_validation.train_test_split(featrues_scaler[:num_now], lables[:num_now], test_size = <span class="number">0.2</span>, random_state = <span class="number">0</span>)</span><br><span class="line">    clf_svm = svm.SVC(C = <span class="number">300</span>, gamma = <span class="number">1</span>)</span><br><span class="line">    clf_svm.fit(X_train, y_train)</span><br><span class="line">    num_list.append(num_now)</span><br><span class="line">    score_list.append(clf_svm.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line">score_list_df = pd.DataFrame(&#123;<span class="string">&#x27;sets_num&#x27;</span>:num_list, <span class="string">&#x27;accuracy&#x27;</span>:score_list&#125;)</span><br><span class="line">score_list_df.plot(x=<span class="string">&#x27;set_num&#x27;</span>, y=<span class="string">&#x27;accuracy&#x27;</span>, title=<span class="string">&#x27;Accuracy with sets&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å‘ç°æœ€ä½æ²¡æœ‰ä½äº0.73çš„å‡†ç¡®ç‡ï¼Œæ³¢åŠ¨è¾ƒå¤§åœ¨0.08å·¦å³ï¼Œæ¨¡å‹ç¨³å¥åº¦è¾ƒå¥½ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190024885.png" alt=""></p><h3 id="å›æµ‹"><a href="#å›æµ‹" class="headerlink" title="å›æµ‹"></a>å›æµ‹</h3><p>é¦–å…ˆæ˜¯æ¯”å¯¹ç”¨çš„ç©ºç™½ç»„ï¼Œçº¯éšæœºç­–ç•¥â€”â€”ä¸æ§åˆ¶é£é™©ï¼Œåªæ˜¯åœ¨æ²ªæ·±300è‚¡ç¥¨æ± ä¸­éšæœºé€‰æ‹©è‚¡ç¥¨ä¹°å…¥ï¼Œå½“ä¼°ä»·ä¸Šæ¶¨1.20å€æ—¶å–å‡ºã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">start = <span class="string">&#x27;2019-01-01&#x27;</span></span><br><span class="line">end = <span class="string">&#x27;2019-04-01&#x27;</span></span><br><span class="line">benchmark = <span class="string">&#x27;HS300&#x27;</span></span><br><span class="line">universe = set_universe(<span class="string">&#x27;HS300&#x27;</span>)</span><br><span class="line">capital_base = <span class="number">100000</span></span><br><span class="line">freq = <span class="string">&#x27;d&#x27;</span></span><br><span class="line">refresh_rate = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">account</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">features_list = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handle_data</span>(<span class="params">account</span>):</span><br><span class="line">    random.shuffle(account.universe)</span><br><span class="line">    <span class="keyword">for</span> stock <span class="keyword">in</span> account.universe:</span><br><span class="line">        p = account.reference_price[stock]</span><br><span class="line">        cost = account.security_cost.get(stock)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cost:</span><br><span class="line">            order_pct_to(stock, <span class="number">0.10</span>)</span><br><span class="line">        <span class="keyword">elif</span> cost <span class="keyword">and</span> p &gt;= cost*<span class="number">1.20</span>:</span><br><span class="line">            order_to(stock, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190030957.png" alt=""></p><p>æ¥ä¸‹æ¥ï¼Œè¿ç”¨SVMé¢„æµ‹æ¨¡å‹é¢„æµ‹æ²ªæ·±300æŒ‡æ•°çš„èµ°åŠ¿ï¼Œæ“ä½œæ–¹æ³•æ˜¯æ¯æ—¥æ”¶ç›˜ååˆ¤æ–­æ²ªæ·±300æŒ‡æ•°æœªæ¥30å¤©çš„æ”¶ç›˜ä»·æ˜¯å¦å¤§äºä»Šæ—¥çš„æ”¶ç›˜ä»·ã€‚</p><p>å¦‚æœé¢„æµ‹å‡ºä¸Šæ¶¨ï¼Œåœ¨å½“ä¸‹ä¸€æ—¥çš„ä»·æ ¼ä½äºå‰ä¸€æ—¥æ”¶ç›˜ä»·æ—¶ï¼Œä¹°å…¥æ»¡è¶³æ¡ä»¶çš„è‚¡ç¥¨ï¼Œæ€»ä»·å€¼å è™šæ‹Ÿè´¦æˆ·çš„10%ï¼›</p><p>å¦‚æœé¢„æµ‹å‡ºä¸‹è·Œæˆ–æ²¡æœ‰å˜åŒ–ï¼Œå½“ä¸‹ä¸€æ—¥çš„ä»·æ ¼æ¶¨å¹…åˆ°ä¹°å…¥ä»·çš„1.2å€æ—¶ï¼Œæ¸…ä»“å–å‡ºã€‚</p><p>æ¯æ—¥åªè¿›è¡Œä¸€æ¬¡äº¤æ˜“æˆ–ä¸è¿›è¡Œäº¤æ˜“ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”±äº¤æ˜“ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">start = <span class="string">&#x27;2019-01-01&#x27;</span></span><br><span class="line">end = <span class="string">&#x27;2019-04-01&#x27;</span></span><br><span class="line">benchmark = <span class="string">&#x27;HS300&#x27;</span></span><br><span class="line">universe = set_universe(<span class="string">&#x27;HS300&#x27;</span>)</span><br><span class="line">capital_base = <span class="number">100000</span></span><br><span class="line">freq = <span class="string">&#x27;d&#x27;</span></span><br><span class="line">refresh_rate = <span class="number">1</span></span><br><span class="line">stock = <span class="string">&#x27;00300&#x27;</span></span><br><span class="line">fields = [<span class="string">&#x27;tradeDate&#x27;</span>,<span class="string">&#x27;closeIndex&#x27;</span>,<span class="string">&#x27;highstIndex&#x27;</span>,<span class="string">&#x27;lowestIndex&#x27;</span>,<span class="string">&#x27;turnoverVol&#x27;</span>,<span class="string">&#x27;CHG&#x27;</span>,<span class="string">&#x27;CHGPct&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">account</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">features_list = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handle_data</span>(<span class="params">account</span>):</span><br><span class="line">    last_date = account.previous_date.strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    begin_date = pd.date_range(end=last_date, periods=<span class="number">60</span>)[<span class="number">0</span>]</span><br><span class="line">    begin_date = begin_date.strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    to_class = DataAPI.MktIdxdGet(ticker=<span class="string">&#x27;00300&#x27;</span>,beginDate=begin_date,endDate=last_date,field=fields,pandas=<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    to_class = to_class.dropna()</span><br><span class="line">    to_class = to_class[-<span class="number">30</span>:]</span><br><span class="line">    to_class_date = to_class.set_index(<span class="string">&#x27;tradeDate&#x27;</span>)</span><br><span class="line">    to_class_date[<span class="string">&#x27;max_difference&#x27;</span>] = to_class_date[<span class="string">&#x27;highestIndex&#x27;</span>] - to_class_date[<span class="string">&#x27;lowestIndex&#x27;</span>]</span><br><span class="line">    to_class_date_max_of_30day = <span class="built_in">max</span>(to_class_date[<span class="string">&#x27;highestIndex&#x27;</span>])</span><br><span class="line">    to_class_date_min_of_30day = <span class="built_in">min</span>(to_class_date[<span class="string">&#x27;lowestIndex&#x27;</span>])</span><br><span class="line">    to_class_date_max_difference_of_30day = <span class="built_in">max</span>(to_class_date[<span class="string">&#x27;max_difference&#x27;</span>])</span><br><span class="line">    </span><br><span class="line">    features_for_predict = to_class_date[-<span class="number">1</span>:]</span><br><span class="line">    features_for_predict[<span class="string">&#x27;max_of_30day&#x27;</span>] = to_class_date_max_of_30day</span><br><span class="line">    features_for_predict[<span class="string">&#x27;min_of_30day&#x27;</span>] = to_class_date_min_of_30day</span><br><span class="line">    features_for_predict[<span class="string">&#x27;max_difference_of_30day&#x27;</span>] = to_class_date_max_difference_of_30day</span><br><span class="line">    features_fp_scaler = scaler.transform(features_for_predict)</span><br><span class="line">    predict_up = clf_svm.predict(features_fp_scaler)</span><br><span class="line">    </span><br><span class="line">    random.shuffle(account.universe) <span class="keyword">for</span> stock <span class="keyword">in</span> account.universe:</span><br><span class="line">        p = account.reference_price[stock]</span><br><span class="line">        cost = account.security_cost.get(stock)</span><br><span class="line">        <span class="keyword">if</span> predict_up <span class="keyword">and</span> <span class="keyword">not</span> cost:</span><br><span class="line">            order_pct_to(stock, <span class="number">0.10</span>)</span><br><span class="line">        <span class="keyword">elif</span> cost <span class="keyword">and</span> p &gt;= cost*<span class="number">1.20</span>:</span><br><span class="line">            order_to(stock, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303190045366.png" alt=""></p><h3 id="è¯„ä¼°SVMæ¨¡å‹æ‹©æ—¶ç­–ç•¥"><a href="#è¯„ä¼°SVMæ¨¡å‹æ‹©æ—¶ç­–ç•¥" class="headerlink" title="è¯„ä¼°SVMæ¨¡å‹æ‹©æ—¶ç­–ç•¥"></a>è¯„ä¼°SVMæ¨¡å‹æ‹©æ—¶ç­–ç•¥</h3><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">å¹´åŒ–æ”¶ç›Šç‡</th><th style="text-align:center">è´å¡”</th><th style="text-align:center">å¤æ™®æ¯”ç‡</th><th style="text-align:center">æ”¶ç›Šæ³¢åŠ¨ç‡</th><th style="text-align:center">ä¿¡æ¯æ¯”ç‡</th><th style="text-align:center">æœ€å¤§å›æ’¤ç‡</th></tr></thead><tbody><tr><td style="text-align:center">éšå³ä¹°å…¥</td><td style="text-align:center">299.2%</td><td style="text-align:center">1.03</td><td style="text-align:center">10.82</td><td style="text-align:center">27.3%</td><td style="text-align:center">2.28</td><td style="text-align:center">6.0%</td></tr><tr><td style="text-align:center">SVMæ‹©æ—¶</td><td style="text-align:center">310.0%</td><td style="text-align:center">1.05</td><td style="text-align:center">11.02</td><td style="text-align:center">27.8%</td><td style="text-align:center">2.65</td><td style="text-align:center">5.8%</td></tr></tbody></table></div><p>æ— è®ºæ˜¯ä»æ”¶ç›Šæƒ…å†µï¼Œè¿˜æ˜¯ä»æœ€å¤§å›æ’¤ç‡æ¥çœ‹ç­–ç•¥çš„æŠ—é£é™©èƒ½åŠ›ï¼ŒSVMæ‹©æ—¶æ¨¡å‹çš„æ•ˆæœç•¥å¥½äºéšæœºä¹°å…¥çš„æ•ˆæœã€‚</p><p>ä½†æ˜¯ä»æ”¶ç›Šæ³¢åŠ¨ç‡çœ‹ç­–ç•¥çš„é£é™©è¦ç•¥å¤§äºéšæœºä¹°å…¥ç­–ç•¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é‡åŒ–æŠ•èµ„ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Quantitative investment </tag>
            
            <tag> Datayes! </tag>
            
            <tag> SVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡åŒ–æ‹©æ—¶â€”â€”æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼ˆä¸€ï¼‰ï¼šä»‹ç»</title>
      <link href="/2023/03/18/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E4%BB%8B%E7%BB%8D/"/>
      <url>/2023/03/18/%E9%87%8F%E5%8C%96%E6%8B%A9%E6%97%B6%E2%80%94%E2%80%94%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡å†…å®¹åŸºäº<a href="https://uqer.datayes.com/">ä¼˜çŸ¿å¹³å°</a>å®ç°ï¼Œä¸ºåœ¨æ ¡è¯¾ç¨‹ä½œä¸šï¼Œä»æœ‰è¾ƒå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚</p><h3 id="æ”¯æŒå‘é‡æœºæ¨¡å‹æ¦‚å¿µ"><a href="#æ”¯æŒå‘é‡æœºæ¨¡å‹æ¦‚å¿µ" class="headerlink" title="æ”¯æŒå‘é‡æœºæ¨¡å‹æ¦‚å¿µ"></a>æ”¯æŒå‘é‡æœºæ¨¡å‹æ¦‚å¿µ</h3><p>æ”¯æŒå‘é‡æœºï¼ˆç®€ç§°SVMï¼‰æ˜¯ä¸€ç§åŸºäºç»Ÿè®¡å­¦ä¹ ç†è®ºçš„æ¨¡å¼è¯†åˆ«æ–¹æ³•ï¼Œå®ƒèƒ½éå¸¸æˆåŠŸåœ°å¤„ç†åˆ†ç±»ã€åˆ¤åˆ«åˆ†æç­‰é—®é¢˜ï¼Œå¹¶å¯æ¨å¹¿åˆ°é¢„æµ‹ä¸ç»¼åˆè¯„ä»·é¢†åŸŸã€‚å…¶æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šå¯»æ‰¾ä¸€ä¸ªæœ€ä¼˜åˆ†ç±»è¶…å¹³é¢,ä½¿å¾—è®­ç»ƒæ ·æœ¬ä¸­çš„ä¸¤ç±»æ ·æœ¬ç‚¹å°½é‡è¢«æ— é”™è¯¯çš„åˆ†å¼€,å¹¶ä¸”è¦ä½¿ä¸¤ç±»çš„åˆ†ç±»é—´éš”æœ€å¤§ã€‚</p><p>SVMæ‹©æ—¶å°±æ˜¯åˆ©ç”¨SVMæŠ€æœ¯è¿›è¡Œå¤§ç›˜è¶‹åŠ¿çš„æ¨¡å¼è¯†åˆ«ï¼Œå°†å¤§ç›˜åŒºåˆ†ä¸ºå‡ ä¸ªæ˜æ˜¾çš„æ¨¡å¼ï¼Œæ‰¾å‡ºå…¶ä¸­çš„ç‰¹å¾ï¼Œç„¶ååˆ©ç”¨å†å²æ•°æ®å­¦ä¹ çš„æ¨¡å‹æ¥é¢„æµ‹æœªæ¥çš„è¶‹åŠ¿ã€‚</p><h3 id="æ ¸æ”¯æŒå‘é‡æœº"><a href="#æ ¸æ”¯æŒå‘é‡æœº" class="headerlink" title="æ ¸æ”¯æŒå‘é‡æœº"></a>æ ¸æ”¯æŒå‘é‡æœº</h3><p>æ”¯æŒå‘é‡æœºSVMå¯åˆ†ä¸ºçº¿æ€§æ”¯æŒå‘é‡æœºå’Œæ ¸æ”¯æŒå‘é‡æœºï¼Œå…¶ä¸­çº¿æ€§æ”¯æŒå‘é‡æœºä¸»è¦é’ˆå¯¹çº¿æ€§åˆ†ç±»é—®é¢˜ã€‚</p><p>çº¿æ€§åˆ†ç±»é—®é¢˜ä¸­ä¸»è¦éœ€è¦è§£å†³æœ€å¤§é—´éš”åˆ†ç±»ï¼Œæœ€å¤§é—´éš”åˆ†ç±»ï¼Œå³åœ¨æ‰€æœ‰å¯èƒ½çš„åˆ†ç±»ç•Œé¢ä¸­ï¼Œå¯»æ‰¾ä½¿åˆ†ç±»è¾¹ç¼˜æœ€å®½çš„ç•Œé¢ï¼Œæ˜¯å¯»æ‰¾æœ€ä½³åˆ†ç±»è¾¹ç•Œçš„æ ¸å¿ƒåŸåˆ™ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¢è‰²å’Œè“è‰²ä¸¤æ¡ç›´çº¿ï¼Œç§°ä¸ºæœ€å¤§è¾¹ç¼˜è¶…å¹³é¢ï¼Œä¸¤æ¡ç›´çº¿é—´è·è¶Šå®½ï¼Œåˆ†ç±»çš„æ•ˆæœåº”è¶Šå¥½ï¼Œå› æ­¤çº¿æ€§æ”¯æŒå‘é‡æœºçš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€ç»„ç›´çº¿çš„å‚æ•°ï¼Œä½¿å¾—åˆ†ç±»é—´éš”å–å¾—æœ€å¤§å€¼ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303182220100.png" alt=""></p><p>ä½†ç°å®ä¸­ç»å¤§å¤šæ•°æ—¶å€™ï¼Œæ•°æ®ä¸­ä¼šåŒ…å«å™ªéŸ³ï¼Œéš¾ä»¥ç”¨ä¸€æ¡ç›´çº¿å°†ä¸¤ç±»æ ·æœ¬å®Œç¾åœ°åŒºåˆ†å¼€æ¥ï¼Œäºæ˜¯å¼•å…¥æ¾å¼›å˜é‡çš„æ¦‚å¿µã€‚</p><p>å¯¹æ¯ä¸ªæ ·æœ¬ç‚¹èµ‹äºˆä¸€ä¸ªæ¾å¼›å˜é‡çš„å€¼ï¼šå¦‚æœè¯¥ç‚¹è½åœ¨æœ€å¤§è¾¹ç¼˜è¶…å¹³é¢æ­£ç¡®çš„ä¸€ä¾§ï¼Œåˆ™æ¾å¼›å˜é‡=0ï¼›å¦åˆ™ï¼Œæ¾å¼›å˜é‡çš„å€¼ç­‰äºè¯¥ç‚¹åˆ°æœ€å¤§è¾¹ç¼˜è¶…å¹³é¢çš„è·ç¦»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303182221104.png" alt=""></p><p>å¼•å…¥æ¾å¼›å˜é‡åï¼Œç›®æ ‡å‡½æ•°åœ¨åŸæœ‰çš„åŸºç¡€ä¹‹ä¸ŠåŠ å…¥ä¸€é¡¹æ ·æœ¬æ¾å¼›å˜é‡ä¹‹å’Œä¸æƒ©ç½šç³»æ•°Cçš„ç§¯ã€‚å…¶ä¸­ï¼Œæƒ©ç½šç³»æ•°Cè¡¨ç¤ºæ¨¡å‹å¯¹é”™è¯¯åˆ†ç±»çš„å®¹å¿åº¦ã€‚</p><p>å½“Cå–è¾ƒå¤§çš„æ•°æ—¶ï¼Œå³ä½¿å¾ˆå°çš„æ¾å¼›å˜é‡ä¹Ÿä¼šé€ æˆå¾ˆå¤§çš„æŸå¤±ï¼Œå› æ­¤åˆ†ç±»å™¨å¯¹é”™è¯¯åˆ†ç±»çš„å®¹å¿åº¦è¾ƒä½ï¼Œå°†å°½å¯èƒ½ä¿è¯åˆ†ç±»æ­£ç¡®ï¼Œä»è€Œå¯¼è‡´è¾ƒé«˜çš„è®­ç»ƒé›†æ­£ç¡®ç‡ã€‚</p><p>åä¹‹ï¼Œå½“C å–è¾ƒå°çš„æ•°æ—¶ï¼Œåˆ†ç±»å™¨å¯¹é”™è¯¯åˆ†ç±»çš„å®¹å¿åº¦è¾ƒé«˜ï¼Œå…è®¸é”™è¯¯åˆ†ç±»çš„å­˜åœ¨ï¼Œåˆ†ç±»å™¨å€¾å‘äºä»¥æœ€å¤§é—´éš”åˆ†ç±»çš„åŸåˆ™è¿›è¡Œåˆ†ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303182223728.png" alt=""></p><p>çº¿æ€§æ”¯æŒå‘é‡æœºèƒ½å¤Ÿå¤„ç†çº¿æ€§åˆ†ç±»é—®é¢˜ï¼Œç„¶è€Œæ›´å¤šæƒ…å†µä¸‹ï¼Œæ ·æœ¬é›†å¾ˆéš¾è¢«çº¿æ€§åˆ†ç±»ã€‚</p><p>å¯¹äºéçº¿æ€§åˆ†ç±»é—®é¢˜ï¼Œæ–°çš„è§£å†³é€”å¾„åˆ™æ˜¯å¢åŠ ç»´åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»»ä½•æ ·æœ¬é›†å¦‚æœåˆ©ç”¨é«˜ç»´æ˜ å°„è½¬åŒ–åˆ°æ— é™ç»´ä¸Šéƒ½å¯ä»¥è¢«çº¿æ€§åˆ’åˆ†ã€‚</p><p>è€Œæ ¸å‡½æ•°æ˜¯ä¸ºäº†å‡å°‘æ˜ å°„åˆ°é«˜ç»´ç©ºé—´åçš„è®¡ç®—é‡è€Œè®¾è®¡çš„ä¸€ä¸ªå†…ç§¯å‡½æ•°ï¼Œä»»æ„ä¸€ç§æ˜ å°„æ–¹å¼éƒ½å¯¹åº”ä¸€ä¸ªç¡®å®šçš„æ ¸å‡½æ•°ï¼Œç†è®ºä¸Šä»»ä½•æ»¡è¶³ä¸€å®šæ•°å­¦æ€§è´¨çš„æ ¸å‡½æ•°éƒ½å¯ä»¥æˆä¸ºæ ¸æ”¯æŒå‘é‡æœºçš„æ ¸å‡½æ•°ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨çº¿æ€§æ ¸ã€å¤šé¡¹å¼æ ¸ã€Sigmoid æ ¸å’Œé«˜æ–¯æ ¸ç­‰ã€‚</p><p>å¤šé¡¹å¼æ ¸ã€Sigmoid æ ¸å’Œé«˜æ–¯æ ¸çš„æ ¸å‡½æ•°éƒ½åŒ…å«$\gamma\$å€¼ä¸€é¡¹ï¼Œ$\gamma\$å†³å®šäº†åŸå§‹æ•°æ®æ˜ å°„åˆ°é«˜ç»´æ•°æ®åï¼Œåœ¨é«˜ç»´ç‰¹å¾ç©ºé—´ä¸­çš„åˆ†å¸ƒã€‚</p><p>$\gamma\$è¶Šå¤§ï¼Œæ ·æœ¬åœ¨é«˜ç»´ç©ºé—´ä¸­çš„åˆ†å¸ƒè¶Šç¨€ç–ï¼Œæ ·æœ¬ä¹‹é—´é—´éš”è¶Šè¿œï¼Œæ›´å®¹æ˜“è¢«åˆ†ç±»è¾¹ç•ŒåŒºåˆ†å¼€æ¥ã€‚</p><p>$\gamma\$çš„é€‰å–å½±å“ç€æ¨¡å‹å‡†ç¡®åº¦ï¼Œæ˜¯SVMä½¿ç”¨ä¸­çš„å…³é”®é—®é¢˜ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303182225355.png" alt=""></p><p>åœ¨é€‰æ ¸å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šæ•°æ®é›†æ˜¯å¦çº¿æ€§å¯åˆ†ã€‚ä½ç»´æ•°æ®å¯ä»¥ç›´æ¥ç”»å›¾è¾¨è®¤ï¼Œé«˜ç»´æ•°æ®å¯ä»¥æ£€æŸ¥å‡¸åŒ…æ˜¯å¦ç›¸äº¤ï¼Œä¸ç›¸äº¤ï¼Œåˆ™çº¿æ€§å¯åˆ†ã€‚ç¡®å®šçº¿æ€§ä¸å¯åˆ†ä¹‹åï¼Œéœ€è¦é‡‡ç”¨æ ¸æ”¯æŒå‘é‡æœºæ¨¡å‹ã€‚</p><p>ä¸åŒæ ¸å‡½æ•°çš„åˆ†ç±»æ€§èƒ½å’Œåˆ†ç±»è¾¹ç•Œä¸å°½ç›¸åŒï¼Œçº¿æ€§æ ¸çš„åˆ†ç±»è¾¹ç•Œä¸ºç›´çº¿ï¼Œå¤šé¡¹å¼æ ¸ã€Sigmoid æ ¸å’Œé«˜æ–¯æ ¸çš„åˆ†ç±»è¾¹ç•Œåœ¨é«˜ç»´ç©ºé—´ä¸­ä¸ºè¶…å¹³é¢ï¼Œåœ¨åŸå§‹ç©ºé—´ä¸­ä¸ºæ›²çº¿ã€‚çº¿æ€§æ ¸ã€ä½é˜¶å¤šé¡¹å¼æ ¸å’ŒSigmoid æ ¸è®¡ç®—é€Ÿåº¦å¿«ï¼Œä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯åœ¨å¤æ‚åˆ†ç±»é—®é¢˜ä¸‹è¡¨ç°ä¸ä½³ã€‚é«˜é˜¶å¤šé¡¹å¼æ ¸å’Œé«˜æ–¯æ ¸çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿæ±‚è§£å¤æ‚çš„è¾¹ç•Œï¼Œå¯¹è®­ç»ƒæ ·æœ¬çš„åˆ†ç±»èƒ½åŠ›å¼ºå¤§ï¼Œç¼ºç‚¹æ˜¯è®¡ç®—é€Ÿåº¦ç¼“æ…¢ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚å®é™…ä½¿ç”¨ä¸­éœ€è¦æ ¹æ®æ•°æ®è‡ªèº«çš„ç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ ¸å‡½æ•°ã€‚</p><p>æƒ©ç½šç³»æ•°Cå’Œ$\gamma\$æ˜¯å½±å“æ”¯æŒå‘é‡åˆ†ç±»å™¨æ€§èƒ½çš„å…³é”®å‚æ•°ã€‚å®é™…åº”ç”¨ä¸­ï¼Œå½“æ•°æ®é‡è¾ƒå°çš„å€™ï¼Œå¯ä»¥é‡‡ç”¨â€œç½‘æ ¼æœç´¢â€å¯¹Cå’Œ$\gamma\$è¿›è¡Œéå†ï¼Œé€‰æ‹©å…¨å±€æœ€ä¼˜å‚æ•°ã€‚ä½†æ˜¯â€œç½‘æ ¼æœç´¢â€è®¡ç®—é‡å¾ˆå¤§ï¼Œä¸€èˆ¬éš¾ä»¥è¿›è¡Œï¼Œå› æ­¤ä¸»è¦è¿˜æ˜¯æ ¹æ®Cå’Œ$\gamma\$çš„å½±å“è¿›è¡Œåˆ¤æ–­ã€‚</p><p>Cå’Œ$\gamma\$è¶Šå¤§ï¼Œæƒ©ç½šè¶Šå¤šï¼Œåˆ†ç±»å™¨å¯¹äºé”™è¯¯çš„å®¹å¿ç¨‹åº¦ä½ï¼›åŒæ—¶ç»è¿‡æ˜ å°„åçš„æ ·æœ¬åœ¨é«˜ç»´ç©ºé—´çš„åˆ†å¸ƒè¶Šç¨€ç–ï¼Œæ›´å®¹æ˜“è¢«åŒºåˆ†ã€‚è¿™éƒ½ä¼šå¯¼è‡´è®­ç»ƒé›†çš„æ­£ç¡®ç‡æ›´é«˜ï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½å¸¦æ¥è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œä½¿å¾—åå·®å‡å°ä½†æ–¹å·®å¢å¤§ã€‚</p><h3 id="æ¨¡å‹åŸºæœ¬æ€è·¯"><a href="#æ¨¡å‹åŸºæœ¬æ€è·¯" class="headerlink" title="æ¨¡å‹åŸºæœ¬æ€è·¯"></a>æ¨¡å‹åŸºæœ¬æ€è·¯</h3><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303182227127.jpg" alt=""></p><h4 id="æ•°æ®è·å–"><a href="#æ•°æ®è·å–" class="headerlink" title="æ•°æ®è·å–"></a>æ•°æ®è·å–</h4><p>æ”¶é›†å¯èƒ½ç”¨åˆ°çš„å†å²æ•°æ®èµ„æ–™ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œç®€å•çš„å¤„ç†ã€‚</p><p>äººä»¬å°†é‡åŒ–æŠ•èµ„ç§°ä¸ºâ€é»‘ç®±â€œå°±æ˜¯å› ä¸ºæ•°æ®ç”±è¾“å…¥è½¬å˜ä¸ºè¾“å‡ºçš„è¿‡ç¨‹ä¸ä¸ºä»–äººæ‰€ç†è§£ï¼Œè€Œé«˜è´¨é‡çš„æ•°æ®æ˜¯å¥½çš„è¾“å‡ºç»“æœçš„å‰æã€‚æ­¤å¤–ï¼Œå¸¸è¢«å¿½è§†çš„æ˜¯æ¨¡å‹çš„å¾ˆå¤šç»†èŠ‚ä¹Ÿå–å†³äºåŸæœ‰çš„æ•°æ®ç‰¹å¾ï¼Œå› ä¸ºå¯¹æ•°æ®çš„å¤„ç†æ–¹å¼å’Œæ•°æ®çš„ç”¨å¤„å¾ˆå¤šæ—¶å€™å–å†³äºæ•°æ®çš„å±æ€§ã€‚</p><p>å¦‚æœæ•°æ®çš„è·å–è¿™ä¸€ç¯èŠ‚å‡ºç°äº†é—®é¢˜ï¼Œç­–ç•¥çš„è¿è¡Œå°†æ— ä»è°ˆèµ·ã€‚è·å–æ•°æ®çš„æ¥æºä¸»è¦æœ‰ä¸‰ç§ï¼šæœªåŠ å·¥çš„æ•°æ®ã€äºŒæ‰‹æ•°æ®å’Œç¬¬ä¸‰æ–¹ä¾›åº”å•†æä¾›çš„æ•°æ®ã€‚</p><h4 id="æ•°æ®æ‹†åˆ†"><a href="#æ•°æ®æ‹†åˆ†" class="headerlink" title="æ•°æ®æ‹†åˆ†"></a>æ•°æ®æ‹†åˆ†</h4><p>è·å–æ•°æ®åç¬¬ä¸€æ­¥åº”è¯¥åšçš„æ˜¯æ•°æ®çš„æ‹†åˆ†ï¼Œä»è€Œä½¿ç”¨ä¸åŒçš„æ•°æ®å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ã€‚</p><p>è¿™ä¸€æ­¥å‡ ä¹æ‰€æœ‰å›½å†…ç›¸å…³æ–‡çŒ®éƒ½æ²¡æœ‰ç»™äºˆè¶³å¤Ÿçš„é‡è§†ï¼Œä»–ä»¬å¾€å¾€å…ˆè¿›è¡Œæ•°æ®çš„é¢„å¤„ç†å†è¿›è¡Œæ•°æ®çš„æ‹†åˆ†ï¼Œè¿™æ ·åšçš„åæœå¾ˆå¯èƒ½æ˜¯æœ€åçš„æµ‹è¯•ç»“æœè¾ƒå¥½ä½†çœŸæ­£ç”¨äºå®è·µç»“æœæ—¶å´ä¸å¦‚æ„ï¼Œå› ä¸ºè¿™å­˜åœ¨ç€â€å·çª¥â€œæ•°æ®çš„æ“ä½œã€‚</p><p>å› æ­¤åœ¨æ•°æ®è·å–ååº”ç«‹å³è¿›è¡Œæ‹†åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå¹¶å°†æµ‹è¯•é›†æ•°æ®ä¿å­˜å¥½ï¼Œåœ¨æ•´ä¸ªæ¨¡å‹çš„è®­ç»ƒé˜¶æ®µéƒ½ä¸è¦è§¦ç¢°ã€‚</p><h4 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h4><p>æ•°æ®é¢„å¤„ç†æœ€ä¸»è¦çš„å·¥ä½œæ˜¯ä½¿ä¸åŒç‰¹å¾æŒ‡æ ‡çš„é‡çº²è¾¾åˆ°ä¸€æ ·ã€‚</p><p>æœ€ä¸ºå¸¸è§çš„åšæ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ•°æ®çš„å½’ä¸€åŒ–ï¼Œå‹ç¼©æ•°æ®ä½¿å¾—å¯¹äºæ¯ä¸ªè‡ªå˜é‡è€Œè¨€ï¼Œå®ƒä»¬çš„å€¼éƒ½åœ¨åŒä¸€ä¸ªèŒƒå›´ï¼›å¦ä¸€ç§æ˜¯æ ‡å‡†åŒ–ï¼Œé€šè¿‡å‹ç¼©æ•°æ®ï¼Œä½¿æ¯ä¸ªè‡ªå˜é‡å€¼çš„æ–¹å·®å’Œå‡å€¼éƒ½ä¸€æ ·ã€‚æœ¬æ–‡é‡‡ç”¨æ•°æ®çš„æ ‡å‡†åŒ–ã€‚</p><h4 id="é€‰å–ç‰¹å¾æŒ‡æ ‡ä¸é¢„æµ‹å˜é‡"><a href="#é€‰å–ç‰¹å¾æŒ‡æ ‡ä¸é¢„æµ‹å˜é‡" class="headerlink" title="é€‰å–ç‰¹å¾æŒ‡æ ‡ä¸é¢„æµ‹å˜é‡"></a>é€‰å–ç‰¹å¾æŒ‡æ ‡ä¸é¢„æµ‹å˜é‡</h4><p>ç‰¹å¾æŒ‡æ ‡çš„é€‰å–å°±æ˜¯ç¡®å®šå½±å“æ¨¡å‹éœ€è¦é¢„æµ‹ç›®æ ‡çš„å½±å“å› ç´ ï¼Œä¹Ÿå°±æ˜¯ç¡®å®šè¾“å…¥å˜é‡ã€‚</p><p>é¢„æµ‹å˜é‡çš„é€‰å–å°±æ˜¯ç¡®å®šæ¨¡å‹éœ€è¦é¢„æµ‹ä»€ä¹ˆã€‚</p><h4 id="å‚æ•°å¯»ä¼˜"><a href="#å‚æ•°å¯»ä¼˜" class="headerlink" title="å‚æ•°å¯»ä¼˜"></a>å‚æ•°å¯»ä¼˜</h4><p>å‚æ•°çš„é€‰æ‹©å¯¹æœ€åæ”¯æŒå‘é‡æœºæ¨¡å‹çš„å¥½åèµ·ç€é‡è¦çš„ä½œç”¨ï¼Œæœ¬æ–‡ä½¿ç”¨SVMåˆ†ç±»å™¨æ¥åˆ¤æ–­æ¶¨è·Œï¼Œç»“åˆSVMç®—æ³•å¯»æ‰¾å‡ºé€‚åˆè®­ç»ƒé›†çš„æœ€ä¼˜å‚æ•°ã€‚</p><h4 id="SVMæ¨¡å‹è®­ç»ƒ"><a href="#SVMæ¨¡å‹è®­ç»ƒ" class="headerlink" title="SVMæ¨¡å‹è®­ç»ƒ"></a>SVMæ¨¡å‹è®­ç»ƒ</h4><p>ç¡®å®šå¥½æ•´ä¸ªé‡åŒ–æ‹©æ—¶ç­–ç•¥æ¨¡å‹æ‰€éœ€è¦çš„å„ä¸ªå‚æ•°åï¼Œå°±æ˜¯å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒäº†ã€‚</p><h4 id="å»ºç«‹æ¨¡å‹"><a href="#å»ºç«‹æ¨¡å‹" class="headerlink" title="å»ºç«‹æ¨¡å‹"></a>å»ºç«‹æ¨¡å‹</h4><p>ç»è¿‡è¾“å…¥æœ€ä¼˜å‚æ•°åçš„SVMç®—æ³•è®­ç»ƒåå¾—åˆ°æ¨¡å‹ã€‚</p><h4 id="è¯„ä¼°æ¨¡å‹"><a href="#è¯„ä¼°æ¨¡å‹" class="headerlink" title="è¯„ä¼°æ¨¡å‹"></a>è¯„ä¼°æ¨¡å‹</h4><p>åœ¨å»ºç«‹å¥½æ¨¡å‹åä¼šå¾—åˆ°åŸºäºè®­ç»ƒé›†æ¨¡å‹çš„è¯„ä»·æŒ‡æ ‡ï¼Œè¿™äº›è¯„ä»·æŒ‡æ ‡çš„å€¼è‹¥æ˜¯è¾¾åˆ°äº†é¢„æœŸçš„ç›®æ ‡ï¼Œå°±å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œè‹¥æ˜¯æ²¡æœ‰ï¼Œåˆ™éœ€è¦å¯¹ä»¥ä¸Šå„æ­¥éª¤è¿›è¡Œæ”¹è¿›ï¼Œä»¥è¾¾åˆ°æ»¡æ„çš„ç»“æœã€‚</p><h4 id="æµ‹è¯•æ¨¡å‹"><a href="#æµ‹è¯•æ¨¡å‹" class="headerlink" title="æµ‹è¯•æ¨¡å‹"></a>æµ‹è¯•æ¨¡å‹</h4><p>å¯¹è®­ç»ƒå¾—å‡ºçš„æ¨¡å‹æ¨å¹¿ï¼ˆæˆ–ç§°æ³›åŒ–ï¼‰èƒ½åŠ›ç”¨æµ‹è¯•é›†è¿›è¡ŒéªŒè¯ã€‚</p><p>å¦‚æœé€šè¿‡æµ‹è¯•é›†éªŒè¯åå„é¡¹è¯„ä»·æŒ‡æ ‡æ¯”è¾ƒå¥½ï¼Œåˆ™ç­–ç•¥æ¨¡å‹è¡¨ç°è¾ƒå¥½ï¼Œå¦åˆ™è¯´æ˜æ¨å¹¿èƒ½åŠ›å·®ï¼Œæ¨¡å‹ä¸æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é‡åŒ–æŠ•èµ„ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Quantitative investment </tag>
            
            <tag> Datayes! </tag>
            
            <tag> SVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github+Hexoæ­å»ºä¸ªäººç½‘ç«™ï¼ˆä¸€ï¼‰:ç½‘ç«™æ­å»º</title>
      <link href="/2023/03/17/Github+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/03/17/Github+Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬æ–‡ä¸ºåŸºäºGithub+Hexoçš„ä¸ªäººç½‘ç«™æ­å»ºæ•™ç¨‹ã€‚</p><p>ç³»ç»Ÿç¯å¢ƒï¼šwin10</p><h3 id="æ³¨å†Œgithub"><a href="#æ³¨å†Œgithub" class="headerlink" title="æ³¨å†Œgithub"></a>æ³¨å†Œgithub</h3><ul><li><p>è¿›å…¥<a href="https://github.com">https://github.com</a> ç‚¹å‡»å³ä¸Šè§’<strong><em>sign up</em></strong></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172212687.png" alt=""></p></li></ul><h3 id="åˆ›å»ºrepository"><a href="#åˆ›å»ºrepository" class="headerlink" title="åˆ›å»ºrepository"></a>åˆ›å»ºrepository</h3><ul><li><p>ç™»å½•githubåï¼Œç‚¹å‡»å³ä¸Šè§’<strong>+</strong>å·ï¼Œé€‰æ‹©<strong>New repository</strong>åˆ›å»ºä¸€ä¸ªä¸è‡ªå·±çš„åšå®¢ç›¸å…³çš„repositoryé¡¹ç›®ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172212366.png" alt=""></p></li><li><p>Repository nameçš„æ ¼å¼ä¸º<strong>username.github.io</strong>ï¼Œä¾‹å¦‚æˆ‘çš„usernameæ˜¯miaomiao0426ï¼Œåˆ™æˆ‘çš„Repository nameåº”ä¸ºmiaomiao0426.github.io</p></li><li><p>å‹¾é€‰<strong>public</strong>ï¼Œå‹¾é€‰<strong>Add a README file</strong></p></li><li><p>æ‹‰åˆ°é¡µé¢ä¸‹æ–¹ï¼Œç‚¹å‡»<strong>Create repository</strong></p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172213710.png" style="zoom:80%;" /></p></li></ul><h3 id="å®‰è£…Node-jså’ŒGit"><a href="#å®‰è£…Node-jså’ŒGit" class="headerlink" title="å®‰è£…Node.jså’ŒGit"></a>å®‰è£…Node.jså’ŒGit</h3><ul><li><p>è¿›å…¥<a href="https://nodejs.org/en/download">Node.jså®˜ç½‘</a>ï¼ŒæŒ‰éœ€ä¸‹è½½ç›¸åº”ç‰ˆæœ¬å®‰è£…ã€‚</p></li><li><p>è¿›å…¥<a href="https://git-scm.com/download/win">Gitå®˜ç½‘</a>ï¼ŒæŒ‰éœ€ä¸‹è½½ç›¸åº”ç‰ˆæœ¬å®‰è£…ã€‚</p></li></ul><h3 id="æ£€éªŒæ˜¯å¦å®‰è£…å®Œæˆ"><a href="#æ£€éªŒæ˜¯å¦å®‰è£…å®Œæˆ" class="headerlink" title="æ£€éªŒæ˜¯å¦å®‰è£…å®Œæˆ"></a>æ£€éªŒæ˜¯å¦å®‰è£…å®Œæˆ</h3><ul><li><p>åŒæ—¶æŒ‰ä¸‹<strong>Winé”®å’ŒRé”®</strong>ï¼Œæ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥<strong>cmd</strong>ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172214156.png" alt=""></p></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œè‹¥æ˜¾ç¤ºç›¸åº”ç‰ˆæœ¬ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git --version</span><br><span class="line">$ node -v</span><br><span class="line">$ npm -v</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç”ŸæˆSSHå¯†é’¥"><a href="#ç”ŸæˆSSHå¯†é’¥" class="headerlink" title="ç”ŸæˆSSHå¯†é’¥"></a>ç”ŸæˆSSHå¯†é’¥</h3><p>è¯¥æ“ä½œçš„ç›®çš„æ˜¯ï¼šé€šè¿‡gitæ“ä½œå®ç°æœ¬åœ°ä»£ç åº“ä¸Githubä»£ç åº“çš„åŒæ­¥ã€‚</p><ul><li><p>ä»ç”µè„‘å¼€å§‹é¡µé¢ä¸­æ‰¾åˆ°<strong>git bash</strong>å¹¶æ‰“å¼€ï¼Œä¹‹åæ‰€æœ‰çš„å‘½ä»¤å‡åœ¨git bashä¸­è¾“å…¥ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172214070.png" alt=""></p></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥è‡ªå·±ç”µè„‘ä¸Šæ˜¯å¦æœ‰SSH Keyï¼Œå¦‚æœæ˜¾ç¤ºNo such file or directoryï¼Œè¯´æ˜æ²¡æœ‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br></pre></td></tr></table></figure></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå…¶ä¸­é‚®ä»¶åœ°å€è¾“å…¥æ³¨å†ŒGithubçš„é‚®ç®±åœ°å€ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;é‚®ä»¶åœ°å€@youemail.com&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>ç³»ç»Ÿä¼šæ˜¾ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/your_user_directory/.ssh/id_rsa):</span><br></pre></td></tr></table></figure></li><li><p>ç‚¹å‡»å›è½¦ã€‚</p></li><li><p>ç³»ç»Ÿä¼šä¸¤æ¬¡è¦æ±‚è¾“å…¥å¯†ç ï¼Œå‡ç›´æ¥å›è½¦å°±å¥½ã€‚å¦‚æœæƒ³è¦è®¾ç½®å¯†ç ï¼Œç›´æ¥è¾“å…¥ï¼Œä½†è¾“å…¥å¯†ç çš„æ—¶å€™æ˜¯æ²¡æœ‰è¾“å…¥ç—•è¿¹çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure></li><li><p>æ¥ä¸‹æ¥ç³»ç»Ÿä¼šæ˜¾ç¤ºè®¾ç½®æˆåŠŸï¼Œå¹¶å‘Šè¯‰ä½ å¯†é’¥å­˜å‚¨çš„ä½ç½®æ˜¯<strong>c/Users/you/.ssh/id_rsa.pub</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Your identification has been saved <span class="keyword">in</span> /c/Users/you/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /c/Users/you/.ssh/id_rsa.pub.</span><br></pre></td></tr></table></figure></li></ul><h3 id="é…ç½®SSHå¯†é’¥åˆ°githubä¸Š"><a href="#é…ç½®SSHå¯†é’¥åˆ°githubä¸Š" class="headerlink" title="é…ç½®SSHå¯†é’¥åˆ°githubä¸Š"></a>é…ç½®SSHå¯†é’¥åˆ°githubä¸Š</h3><ul><li><p>æ‰¾åˆ°å¯†é’¥å­˜å‚¨çš„ä½ç½®ï¼Œå³id_rsa.pubæ–‡ä»¶ã€‚å¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨.sshæ–‡ä»¶å¤¹ä¸­ï¼Œç‚¹å‡»æŸ¥çœ‹ï¼Œå‹¾é€‰éšè—çš„é¡¹ç›®ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172215270.png" alt=""></p></li><li><p>ç”¨è®°äº‹æœ¬æˆ–Notepad++æ‰“å¼€æ­¤æ–‡ä»¶ï¼Œå¤åˆ¶å…¶ä¸­çš„å†…å®¹ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172215287.png" alt=""></p></li><li><p>å›åˆ°githubä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒï¼Œç‚¹å‡»<strong>Settings</strong>ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172216323.png" style="zoom:80%;" /></p></li><li><p>ç‚¹å‡»å·¦ä¾§<strong>SSH and GPG keys</strong>ï¼Œç‚¹å‡»å³ä¸Šæ–¹<strong>New SSH key</strong>ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172217316.png" alt=""></p></li><li><p>å°†åˆšæ‰å¤åˆ¶çš„å†…å®¹ç²˜è´´è¿›<strong>key</strong>ä¸­ï¼Œ<strong>Title</strong>å¤„éšä¾¿èµ·ä¸€ä¸ªåå­—ï¼Œç‚¹å‡»<strong>Add SSH key</strong>ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172218800.png" alt=""></p></li></ul><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><ul><li><p>æ‰“å¼€<strong>git bash</strong>ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå†…å®¹ä¸è¦æ”¹åŠ¨ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure></li><li><p>ç³»ç»Ÿä¼šæ˜¾ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">â€¦â€¦</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)</span><br></pre></td></tr></table></figure></li><li><p>è¾“å…¥<strong>yes</strong>ï¼Œ<strong>å›è½¦</strong>ï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥åˆšæ‰è®¾ç½®çš„å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/c/Users/your_user_directory/.ssh/id_rsa&#x27;</span>:</span><br></pre></td></tr></table></figure></li><li><p>å›è½¦åï¼Œçœ‹åˆ°ç³»ç»Ÿæç¤ºæˆåŠŸï¼Œè¡¨ç¤ºgitå¯ä»¥é€šè¿‡SSHé“¾æ¥åˆ°githubäº†ã€‚</p></li></ul><h3 id="è®¾ç½®gitä¸ªäººä¿¡æ¯"><a href="#è®¾ç½®gitä¸ªäººä¿¡æ¯" class="headerlink" title="è®¾ç½®gitä¸ªäººä¿¡æ¯"></a>è®¾ç½®gitä¸ªäººä¿¡æ¯</h3><ul><li><p>åœ¨git bashä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚ä»¥æˆ‘ä¸ªäººä¸ºä¾‹ï¼Œè¾“å…¥æ³¨å†Œæ—¶çš„usernameå³miaomiao0426ï¼Œè¾“å…¥githubæ³¨å†Œé‚®ç®±å³codewithmiaomiao@163.comã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;miaomiao0426&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;codewithmiaomiao@163.com&quot;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h3><ul><li><p>åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªåšå®¢æ–‡ä»¶å¤¹ï¼Œä»¥æˆ‘ä¸ªäººä¸ºä¾‹ï¼Œåœ¨Dç›˜æ–°å»ºâ€myblogâ€æ–‡ä»¶å¤¹ã€‚</p></li><li><p>åœ¨è¯¥æ–‡ä»¶å¤¹ä¸Šï¼Œç‚¹å‡»é¼ æ ‡å³é”®ï¼Œé€‰æ‹©<strong>Git bash here</strong>ã€‚</p></li><li><p>æ­¤æ—¶ï¼Œæ‰“å¼€çš„git bashçª—å£å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172218011.png" alt=""></p></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo</span><br><span class="line">$ hexo init</span><br><span class="line">$ npm install</span><br><span class="line">$ npm install hexo -deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>æ­¤æ—¶ï¼Œæ‰“å¼€myblogæ–‡ä»¶å¤¹å¯ä»¥å‘ç°ï¼ŒHexoå·²ç»åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹é¢å»ºç«‹åšå®¢æ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶äº†ã€‚</p></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæ ¹æ®æç¤ºåœ¨æµè§ˆå™¨è¾“å…¥<strong>localhost:4000</strong>é¢„è§ˆhexoåšå®¢ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure></li><li><p>æŒ‰<strong>ctrl+C</strong>å¯ä»¥é€€å‡ºé¢„è§ˆã€‚æ­¤æ—¶ï¼Œåšå®¢ç»™äº†ä¸€ä¸ªé»˜è®¤çš„ä¸»é¢˜landscapeï¼Œè¿˜æœ‰ä¸€ç¯‡Hello Worldç¤ºä¾‹æ–‡ç« ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹é…ç½®è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜å’Œä¸ªæ€§åŒ–è£…é¥°ï¼ˆä¸‹ä¸€ç¯‡æ–‡ç« ç»†è®²ï¼‰ã€‚</p></li></ul><h3 id="å°†åšå®¢éƒ¨ç½²åˆ°github"><a href="#å°†åšå®¢éƒ¨ç½²åˆ°github" class="headerlink" title="å°†åšå®¢éƒ¨ç½²åˆ°github"></a>å°†åšå®¢éƒ¨ç½²åˆ°github</h3><ul><li><p>è¿›å…¥githubä¸ªäººä¸»é¡µçš„<strong>repository</strong>ä¸­ï¼Œå¤åˆ¶<strong>SSH</strong>ã€‚</p><p><img src="https://cdn.staticaly.com/gh/miaomiao0426/image@main/img/202303172218933.png" alt=""></p></li><li><p>ç”¨è®°äº‹æœ¬æˆ–Notepad++æ‰“å¼€<strong>D:/myblog/_config.yml</strong>ï¼Œæ‹‰åˆ°é¡µé¢æœ€ä¸‹æ–¹ï¼Œæ‰¾åˆ°<strong>deployå¤„</strong>ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼Œå¹¶å°†åˆšæ‰å¤åˆ¶çš„SSHç ç²˜è´´åˆ°<strong>repository:</strong> åé¢ï¼ˆå†’å·åæœ‰ç©ºæ ¼ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:usename/usename.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹åä¿å­˜_config.ymlæ–‡ä»¶ï¼Œåœ¨myblogæ–‡ä»¶å¤¹ä¸Šå³é”®æ‰“å¼€Git bash hereï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure></li></ul><h3 id="æˆåŠŸ"><a href="#æˆåŠŸ" class="headerlink" title="æˆåŠŸ"></a>æˆåŠŸ</h3><ul><li>æ­¤æ—¶åœ¨æµè§ˆå™¨è¾“å…¥<strong>usename.github.io</strong>ï¼Œå¯è¿›å…¥ä¸ªäººç½‘ç«™ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººç½‘ç«™ç›¸å…³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> hexo </tag>
            
            <tag> personal website </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
